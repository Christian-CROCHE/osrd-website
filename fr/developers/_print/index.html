<!doctype html><html lang=fr class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><link rel=canonical type=text/html href=https://dgexsolutions.github.io/osrd-website/fr/developers/><link rel=alternate type=application/rss+xml href=https://dgexsolutions.github.io/osrd-website/fr/developers/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/osrd-website/favicons/favicon.ico><link rel=apple-touch-icon href=/osrd-website/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/osrd-website/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/osrd-website/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/osrd-website/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/osrd-website/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/osrd-website/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/osrd-website/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/osrd-website/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/osrd-website/favicons/android-192x192.png sizes=192x192><title>Développeurs | OSRD</title><meta name=description content="Vous souhaitez contribuer à OSRD, ou simplement en comprendre le fonctionnement? Cette documentation est pour vous!
"><meta property="og:title" content="Développeurs"><meta property="og:description" content="Open Source Railway Designer"><meta property="og:type" content="website"><meta property="og:url" content="https://dgexsolutions.github.io/osrd-website/fr/developers/"><meta property="og:image" content="https://dgexsolutions.github.io/osrd-website/fr/developers/_print/featured-background.jpg"><meta property="og:site_name" content="OSRD"><meta itemprop=name content="Développeurs"><meta itemprop=description content="Open Source Railway Designer"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dgexsolutions.github.io/osrd-website/fr/developers/_print/featured-background.jpg"><meta name=twitter:title content="Développeurs"><meta name=twitter:description content="Open Source Railway Designer"><link rel=preload href=/osrd-website/scss/main.min.f0cb47c7ce6540a1e4a610e4d98d8cc4da856a5e063f26613819a09e01f61014.css as=style><link href=/osrd-website/scss/main.min.f0cb47c7ce6540a1e4a610e4d98d8cc4da856a5e063f26613819a09e01f61014.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/osrd-website/fr/><span class=navbar-logo><svg id="Calque_1" data-name="Calque 1" viewBox="0 0 64 64" sodipodi:docname="logo_osrd_seul_blanc.svg" width="64" height="64" inkscape:version="1.1.2 (0a00cf5339, 2022-02-04)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"><sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="3440" inkscape:window-height="1380" id="namedview47" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:zoom="3.0016455" inkscape:cx="12.992873" inkscape:cy="71.294228" inkscape:window-x="0" inkscape:window-y="32" inkscape:window-maximized="1" inkscape:current-layer="Calque_1" inkscape:pagecheckerboard="0"/><defs id="defs4"><style id="style2">.cls-1,.cls-2,.cls-3,.cls-4,.cls-7{fill:none;stroke-linecap:round;stroke-linejoin:round}.cls-1,.cls-4{stroke:#aa026d}.cls-1,.cls-2{stroke-width:10px}.cls-2,.cls-3{stroke:#71196f}.cls-3,.cls-4{stroke-width:5px}.cls-5,.cls-6{font-size:119.48px}.cls-5{fill:#71196f;font-family:AvenirLTStd-Heavy,Avenir LT Std}.cls-6{fill:#aa026d;font-family:AvenirLTStd-Medium,Avenir LT Std}.cls-7{stroke:#fff;stroke-width:.75px}</style></defs><title id="title6">logo-OSRD_</title><g id="g847" transform="matrix(0.09645818,0,0,0.09645818,7.1489968,-1.215e-6)"><path inkscape:connector-curvature="0" class="cls-1" d="m389.52 658.5v-88c0-199.26-91.83-331.42-279.82-362" id="path8" style="stroke:#f2f2f2;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-1" d="m298.5 658.5v-87.07c0-156.89-75.34-258.73-229.71-276" id="path10" style="stroke:#f2f2f2;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-2" d="m216.77 658.5v-70.49c0-121.76-58.68-200.64-178.91-213.6" id="path12" style="stroke:#a0a0a0;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-2" d="M125.74 658.5V617.36C125.74 533.21 86.13 478 5 466.95" id="path14" style="stroke:#a0a0a0;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-2" d="m125.74 658.5v-88c0-199.26 91.84-331.42 279.83-362" id="path16" style="stroke:#a0a0a0;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-2" d="m216.77 658.5v-87.07c0-156.89 75.34-258.73 229.71-276" id="path18" style="stroke:#a0a0a0;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-1" d="m298.5 658.5v-70.49c0-121.76 58.68-200.64 178.91-213.6" id="path20" style="stroke:#f2f2f2;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-1" d="m389.52 658.5v-41.14c0-84.15 39.62-139.36 120.75-150.41" id="path22" style="stroke:#f2f2f2;stroke-opacity:1"/><line class="cls-3" x1="126" y1="642.5" x2="126" y2="122.5" id="line24" style="stroke:#a0a0a0;stroke-opacity:1"/><line class="cls-3" x1="217" y1="642.5" x2="217" y2="2.5" id="line26" style="stroke:#a0a0a0;stroke-opacity:1"/><line class="cls-4" x1="299" y1="642.5" x2="299" y2="2.5" id="line28" style="stroke:#f7f7f7;stroke-opacity:1"/><line class="cls-4" x1="390" y1="642.5" x2="390" y2="122.5" id="line30" style="stroke:#f2f2f2;stroke-opacity:1"/></g></svg></span><span class=font-weight-bold>OSRD</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/osrd-website/fr/who-we-are/><span>Qui sommes-nous ?</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/osrd-website/fr/users/><span>Utilisateurs</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/osrd-website/fr/developers/><span class=active>Développeurs</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/osrd-website/fr/partnership/><span>Partenariats</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/osrd-website/fr/news/><span>News</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Français</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/osrd-website/en/developers/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Rechercher dans ce site…" aria-label="Rechercher dans ce site…" autocomplete=off data-offline-search-index-json-src=/osrd-website/offline-search-index.c75963358d71685bb00aa1fbb9ac318f.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>Version imprimable multipages.
<a href=# onclick="return print(),!1">Cliquer ici pour imprimer</a>.</p><p><a href=/osrd-website/fr/developers/>Retour à la version par défaut</a>.</p></div><h1 class=title>Développeurs</h1><ul><li>1: <a href=#pg-650057b72461c10e8189af8a1759e613>Contribuer</a></li><ul><li>1.1: <a href=#pg-c328d1f281ce53e2c5eae4a03d420c70>Mise en place</a></li><ul></ul><li>1.2: <a href=#pg-5743941a8788eded1c2c90838d3d552f>Suivi des bugs</a></li><li>1.3: <a href=#pg-bfeab1c04aedcd54c6ec9161ed206978>Contribuer du code</a></li><li>1.4: <a href=#pg-3b1e58bad9e821c57de46582bee4ab5a>Passer du code en revue</a></li><li>1.5: <a href=#pg-9dd6bbcecc288c1a96bda2a504038594>Conventions de style</a></li><ul><li>1.5.1: <a href=#pg-f08850af3b1b9fa46814484d453e7de9>Style des commits</a></li></ul><li>1.6: <a href=#pg-f1426c0a8df88bfc815870310f05dc01>Licence</a></li></ul><li>2: <a href=#pg-eaf177d034a9292abd2d5e6a28b493a1>Architecture et fonctionnement</a></li><ul><li>2.1: <a href=#pg-1224afed030f0a12525fd2f2360612da>Modèle de données</a></li><ul><li>2.1.1: <a href=#pg-fbe36ef6c425a4df412090060e20cc3d>Exemple</a></li><li>2.1.2: <a href=#pg-7d10bd9069e433d2ba22cc90de760d37>Liste des APIs</a></li><ul><li>2.1.2.1: <a href=#pg-14268fc980a431f09302ef199b4217b4>API</a></li><li>2.1.2.2: <a href=#pg-ef1ae314eae967256fe1de88d44b74b6>Chartos</a></li><li>2.1.2.3: <a href=#pg-77bf0b09f472e4c516966f4b9f6cc53d>Core</a></li><li>2.1.2.4: <a href=#pg-83c7a66af6737e6111020ecaeb68331a>Editoast</a></li></ul></ul><li>2.2: <a href=#pg-befd136e6b5b2210206144b3c944eaac>Modèle de simulation de la signalisation et des aiguillages</a></li><ul><li>2.2.1: <a href=#pg-316df4779a0afa416a7ab4f49a562a1a>Éléments mobiles</a></li><li>2.2.2: <a href=#pg-9f0fb2d0c4a2e33b802cfc129209bdd6>Localisation</a></li><li>2.2.3: <a href=#pg-f13a3aba85bc2da02a5e44b3909dd138>Reservation</a></li><li>2.2.4: <a href=#pg-8ad0109aa919c10778b63e2b8f4bfd8e>Routage</a></li><li>2.2.5: <a href=#pg-2a543f4825ceadd99db238fa5e4dbee0>Espacement</a></li><li>2.2.6: <a href=#pg-3b89cfa7c83abb27ce1a6db5b915a633>Ordonnancement</a></li><li>2.2.7: <a href=#pg-1ff9412ee379f9154590bd054b704bee>Signalisation</a></li><li>2.2.8: <a href=#pg-0f8ea1a8f1482a3fa7a91a860088c26d>Train</a></li></ul><li>2.3: <a href=#pg-dd37db5b29d390d85797f11e79c4d592>Gestion des versions</a></li><li>2.4: <a href=#pg-b1bbf3a0ceb3ff046e01a45046e51c38>Qualité</a></li><ul></ul><li>2.5: <a href=#pg-a2713c6c3fd5c67da4c8f4dfa193294d>Technical documentation</a></li><ul><li>2.5.1: <a href=#pg-527b0f05ab1d076407ca64a3c600e994>Core</a></li></ul></ul><li>3: <a href=#pg-a7afec2a6360299976014319fa6425cc>Wiki Ferroviaire</a></li><ul><li>3.1: <a href=#pg-017d696c044a7d5a1a401bd7e5245ea1>Glossaire</a></li><ul></ul><li>3.2: <a href=#pg-069dee5d3979633c876226a775237408>Signalisation</a></li><ul><li>3.2.1: <a href=#pg-60055148750cd5a6034dce390a86fa96>Les systèmes d'espacement des trains</a></li><ul><li>3.2.1.1: <a href=#pg-020d1a5c76f0a597d16cdd5eb7880bb9>Block Automatique (BA)</a></li><ul><li>3.2.1.1.1: <a href=#pg-f60098d1f79dc88e28a465556617dcdc>BAL</a></li><li>3.2.1.1.2: <a href=#pg-df767392033b23ea3ad6e798d252568e>BAPR</a></li></ul><li>3.2.1.2: <a href=#pg-e01159cc2509e9b8a7a7388d4bd95a49>ETCS (ERTMS)</a></li><ul></ul></ul></ul></ul></ul><div class=content><p>Vous souhaitez contribuer à OSRD, ou simplement en comprendre le fonctionnement? Cette documentation est pour vous!</p></div></div><div class=td-content><h1 id=pg-650057b72461c10e8189af8a1759e613>1 - Contribuer</h1><div class=lead>Comment apporter sa pierre à l&rsquo;édifice</div><p>Déjà, merci d&rsquo;avoir pris le temps de contribuer !</p><p>Si les sections suivantes forment un guide du contributeur, ce n&rsquo;est pas pour autant un ensemble de règles strictes. En fait, si vous avez déjà contribué à des gros projets opensource, la suite ne sera pas surprenante. Dans le cas contraire, elle vous sera probablement très utile !</p><h3 id=communiquer>Communiquer</h3><p>Vous pouvez gagner du temps en discutant de votre projet de contribution avec les autres contributeurs :</p><ul><li><a href=https://github.com/DGEXSolutions/osrd/issues/new/choose><strong>Créez une issue</strong></a> pour avoir un endroit un discuter de votre contribution</li><li>Rejoignez le salon de messagerie instantanée matrix ! <strong>(très bientôt en place)</strong></li></ul><h3 id=se-renseigner>Se renseigner</h3><p>Comme dans tout projet, chaque changement se repose sur ce qui a été fait par le passé.
Avant d&rsquo;apporter un changement, renseignez-vous sur l&rsquo;existant :</p><ul><li>Vous pouvez <a href=https://dgexsolutions.github.io/osrd-website/fr/developers/internals/>lire la documentation technique</a></li><li>Il est préférable de lire le code source de l&rsquo;application en rapport avec votre projet</li><li>Vous pouvez contacter les derniers développeurs à avoir travaillé sur les zones du code en rapport avec votre projet</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-c328d1f281ce53e2c5eae4a03d420c70>1.1 - Mise en place</h1><div class=lead>Apprendre à mettre en place un environnement de développement</div><div class="alert alert-info" role=alert>La plupart des développeurs OSRD utilisent Linux. Vous pouvez utiliser Windows ou MacOS, mais pourriez rencontrer quelques problèmes.</div><h2 id=obtenir-le-code-source>Obtenir le code source</h2><ul><li>Installer <a href=https://git-scm.com/><code>git</code></a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></li><li>Ouvrir un terminal<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> dans le dossier qui contiendra le code source d&rsquo;OSRD</li><li><code>git clone git@github.com:DGEXSolutions/osrd</code></li></ul><h2 id=lancer-lapplication-avec-docker-compose>Lancer l&rsquo;application avec docker-compose</h2><p>Pendant longtemps, même dans les cas où on ne développe que sur une partie des composants de l&rsquo;application à la fois, il était necessaire de compiler, configurer et lancer les différents composants de l&rsquo;application.</p><p>Aujourd&rsquo;hui, vous pouvez déléguer ce travail à <code>docker-compose</code>, qui lancera tout où partie des composants d&rsquo;OSRD.</p><ul><li>Installer <code>docker</code> et <code>docker-compose</code><sup id=fnref1:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></li><li>Lancer <code>docker-compose up --build</code></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Sous Linux, utilisez le gestionnaire de packet de votre distribution, comme par exemple <code>apt-get</code>.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Sous Windows, ouvrez <code>Git Bash</code>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=td-content style=page-break-before:always><h1 id=pg-5743941a8788eded1c2c90838d3d552f>1.2 - Suivi des bugs</h1><div class=lead>Comment signaler un bug ou suggérer une amélioration</div><p><strong>N&rsquo;hésitez pas à signaler tout ce qui vous semble important !</strong></p><p>Notre outil de suivi des bugs est github. Il est nécessaire de s&rsquo;inscrire pour signaler un bug.</p><p>Suivez <a href=https://github.com/DGEXSolutions/osrd/issues/new/choose>ce lien</a> et choisissez le modèle qui correspond à votre cas de figure.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-bfeab1c04aedcd54c6ec9161ed206978>1.3 - Contribuer du code</h1><div class=lead>Apporter des modifications au code d&rsquo;OSRD</div><p>Ce chapitre décrit le processus aboutissant à l&rsquo;intégration de code au sein du projet. <strong>Si vous avez besoin d&rsquo;aide, ouvrez une issue ou envoyez un message instantané.</strong></p><ol><li><p>Si vous n&rsquo;être pas un habitué de Git, <a href=https://learngitbranching.js.org/>suivez ce tutoriel</a></p></li><li><p><strong>Créez une branche</strong><br>Si vous comptez contribuer régulièrement, vous pouvez demander accès au <a href=https://github.com/DGEXSolutions/osrd>dépot principal</a>. Sinon, <a href=https://github.com/DGEXSolutions/osrd/fork>créez un fork</a>.</p></li><li><p><strong>Ajoutez des changements sur votre branche</strong><br>Essayez de découper votre travail en étapes macroscopiques, et sauvegardez vos changements dans un commit à la fin de chaque étape. Essayez de suivre <a href=../conventions/>les conventions du projet</a>.</p></li><li><p><strong>Ouvrez une pull request</strong><br>Une fois que vos changements sont prêts, il est temps de proposer de les intégrer à la branche <code>dev</code>. Cela se fait <a href=https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request>dans l&rsquo;interface web de Github</a>.</p></li><li><p><strong>Prennez en compte les retours</strong><br>Une fois que votre pull request est ouverte, <a href=https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/about-pull-request-reviews>d&rsquo;autres contributeurs doivent donner leur avis sur votre proposition</a>:</p><ul><li>N&rsquo;importe qui peut donner son avis</li><li>Il est nécessaire d&rsquo;obtenir l&rsquo;approbation de <a href=https://github.com/DGEXSolutions/osrd/blob/dev/.github/CODEOWNERS>quelqu&rsquo;un familier avec le code</a> pour pouvoir intégrer le changement</li><li>Il est d&rsquo;usage de prendre en compte tous les commentaires critiques</li><li>Les commentaires sont souvent écrits dans un style plutôt direct, dans le soucis de collaborer efficacement vers une solution acceptable par tous.</li><li>Une fois que tous les commentaires ont été pris en compte, un mainteneur intègre le changement.</li></ul></li><li><p><strong>N&rsquo;hésitez pas à relancer vos interlocuteurs, plusieurs fois si besoin.</strong></p></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-3b1e58bad9e821c57de46582bee4ab5a>1.4 - Passer du code en revue</h1><div class=lead>Comment faire des retours constructifs</div><figure><a href=https://www.morling.dev/blog/the-code-review-pyramid/><img src=/osrd-website/fr/developers/contribute/reviewing-code/images/code_review_pyramid.svg></a></figure></div><div class=td-content style=page-break-before:always><h1 id=pg-9dd6bbcecc288c1a96bda2a504038594>1.5 - Conventions de style</h1><div class=lead>Conventions de style communes</div><p>Les conventions de style sont des règles d&rsquo;écriture qui permettent d&rsquo;uniformiser divers aspects du projet.</p><p>Elles sont relativement importantes, car elles permettent une meilleure compréhension entre développeurs, et donc une productivité accrue.</p></div><div class=td-content><h1 id=pg-f08850af3b1b9fa46814484d453e7de9>1.5.1 - Style des commits</h1><p>Le format général des commits est le suivant :</p><pre tabindex=0><code>composant: description du changement à l&#39;impératif

Description détaillée du contenu et de la motivation du changement,
si le titre n&#39;est pas complètement évident.
</code></pre><ul><li><strong>le message comme le code doit être en anglais</strong></li><li>tout en minuscule</li><li>il peut y avoir plusieurs composants, séparés par des <code>:</code> quand il y a une relation hiérarchique, ou des <code>,</code> sinon</li><li>dans l&rsquo;idéal, le corps du commit contient une description du changement.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-f1426c0a8df88bfc815870310f05dc01>1.6 - Licence</h1><div class=lead>Droits et obligations</div><p>Tout le code du dépot OSRD est mis à disposition sous <a href=https://choosealicense.com/licenses/lgpl-3.0/>la licence LGPLv3</a>.</p><p>Comme pour tout autre projet open source, contribuer du code implique que son propriétaire consent à sa distribution sous la licence du projet.</p><div class="alert alert-warning" role=alert><p>La licence LGPL interdit de modifier OSRD sans publier le code source de l&rsquo;application modifiée: profitez du travail des autres, et laissez les autres profiter de votre travail !</p><p>Cette contrainte n&rsquo;est pas contagieuse à travers les API: Il est possible d&rsquo;utiliser OSRD comme bibliothèque, framework ou serveur pour s&rsquo;interfacer avec des composants propriétaires. N&rsquo;hésitez pas à proposer des changements pour répondre à vos besoins.</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-eaf177d034a9292abd2d5e6a28b493a1>2 - Architecture et fonctionnement</h1><div class=lead>Architecture et fonctionnement interne de l&rsquo;application</div><p><img src=architecture.svg alt="Architecture du projet"></p></div><div class=td-content><h1 id=pg-1224afed030f0a12525fd2f2360612da>2.1 - Modèle de données</h1><div class=lead>Décrit l&rsquo;organisation et le format des données dans OSRD</div><p>Décrit l&rsquo;organisation et le format des données dans OSRD</p></div><div class=td-content><h1 id=pg-fbe36ef6c425a4df412090060e20cc3d>2.1.1 - Exemple</h1><div class=lead>Exemple d&rsquo;utilisation des formats de données d&rsquo;OSRD</div><h2 id=introduction>Introduction</h2><p><img src=../svg_diagrams/small_infra_diagram.svg alt="Toy infrastructure diagram"></p></div><div class=td-content style=page-break-before:always><h1 id=pg-7d10bd9069e433d2ba22cc90de760d37>2.1.2 - Liste des APIs</h1><div class=lead>APIs disponibles dans OSRD</div></div><div class=td-content><h1 id=pg-14268fc980a431f09302ef199b4217b4>2.1.2.1 - API</h1><div class=lead>Référence pour l&rsquo;API du service API</div><div id=ohpen_swagger_ui></div><script>window.onload=function(){const e=SwaggerUIBundle({url:"/openapi/api.yaml",dom_id:"#ohpen_swagger_ui",presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]});window.ui=e}</script></div><div class=td-content style=page-break-before:always><h1 id=pg-ef1ae314eae967256fe1de88d44b74b6>2.1.2.2 - Chartos</h1><div class=lead>Référence pour l&rsquo;API du service Chartos</div><div id=ohpen_swagger_ui></div><script>window.onload=function(){const e=SwaggerUIBundle({url:"/openapi/chartos.yaml",dom_id:"#ohpen_swagger_ui",presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]});window.ui=e}</script></div><div class=td-content style=page-break-before:always><h1 id=pg-77bf0b09f472e4c516966f4b9f6cc53d>2.1.2.3 - Core</h1><div class=lead>Référence pour l&rsquo;API du service Core</div><div id=ohpen_swagger_ui></div><script>window.onload=function(){const e=SwaggerUIBundle({url:"/openapi/core.yaml",dom_id:"#ohpen_swagger_ui",presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]});window.ui=e}</script></div><div class=td-content style=page-break-before:always><h1 id=pg-83c7a66af6737e6111020ecaeb68331a>2.1.2.4 - Editoast</h1><div class=lead>Référence pour l&rsquo;API du service Editoast</div><div id=ohpen_swagger_ui></div><script>window.onload=function(){const e=SwaggerUIBundle({url:"/openapi/editoast.yaml",dom_id:"#ohpen_swagger_ui",presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]});window.ui=e}</script></div><div class=td-content style=page-break-before:always><h1 id=pg-befd136e6b5b2210206144b3c944eaac>2.2 - Modèle de simulation de la signalisation et des aiguillages</h1><div class=lead>Décrit le fonctionnement du poste d&rsquo;aiguillage virtuel et de la signalisation</div><div class="pageinfo pageinfo-warning"><p>Ce modèle n&rsquo;est pas finalisé, et en attente d&rsquo;implémentation</p></div><h2 id=architecture>Architecture</h2><pre tabindex=0><code class=language-mermaid data-lang=mermaid>flowchart TD
    %%%% NODES

    train[Train]
    %% ↓
    signaling[Signalisation]
    %% ↓
    routing[Routage]
    ordering[Ordonnancement]
    spacing[&#34;Espacement&#34;]
    %% ↓
    reservation[Réservation]
    %% ↓
    location[Localisation]
    movable-elements[&#34;Éléments mobiles&#34;]

    %%%% EDGES

    train -- réagit à --&gt; signaling
    train -- réclame les itinéraires --&gt; ordering
    signaling -- observe --&gt; routing
    ordering -- réserve --&gt; routing
    signaling -- observe --&gt; spacing
    spacing -- observe --&gt; reservation
    spacing -- observe --&gt; movable-elements
    routing -- observe et réserve --&gt; reservation
    reservation -- observe --&gt; location
    reservation -- réserve et actionne --&gt; movable-elements
    train -- informe --&gt; location

    %%%% CLICKABLE LINKS

    click train href &#34;./train/&#34; _self
    click ordering href &#34;./ordering/&#34; _self
    click signaling href &#34;./signaling/&#34; _self
    click routing href &#34;./routing/&#34; _self
    click spacing href &#34;./spacing/&#34; _self
    click reservation href &#34;./reservation/&#34; _self
    click location href &#34;./location/&#34; _self
    click movable-elements href &#34;./movable-elements/&#34; _self
</code></pre><h2 id=todo>TODO</h2><ul><li>overlaps</li><li>opposing movement protection</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-316df4779a0afa416a7ab4f49a562a1a>2.2.1 - Éléments mobiles</h1><div class=lead>Gère l&rsquo;état des organes de commande des aiguilles, passages à niveau, …</div><h2 id=description>Description</h2><p>Chaque élément mobile, aiguille ou passage à niveau, a une liste d&rsquo;états possibles.
Ces états sont mutuellement exclusifs.</p><h2 id=dépendances>Dépendances</h2><ul><li>une liste d&rsquo;élements mobiles</li><li>liste des états possibles de chaque élément mobile</li></ul><h2 id=opérations-possibles>Opérations possibles</h2><ul><li>observer un élément mobile</li><li>vérouiller / dévérouiller un élément mobile</li><li>bouger un élément mobile</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-9f0fb2d0c4a2e33b802cfc129209bdd6>2.2.2 - Localisation</h1><div class=lead>Fournit les informations de position des trains sur le réseau</div><h2 id=description>Description</h2><p>La couche de localisation suit le déplacement des trains dans l&rsquo;infrastructure</p><h2 id=dépendances>Dépendances</h2><ul><li>une liste de zones</li></ul><h2 id=opérations>Opérations</h2><ul><li>Occuper une zone</li><li>Libérer une zone</li><li>Observer les changements d&rsquo;occupation d&rsquo;une zone</li></ul><h2 id=exigences-de-conception>Exigences de conception</h2><ul><li>il doit être possible de suivre les changements d&rsquo;occupation d&rsquo;une zone</li><li>il <em>devra</em> être possible de suivre les déplacements d&rsquo;un train</li><li>il <em>devra</em> être possible d&rsquo;implémenter un système de bloc mobile</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-f13a3aba85bc2da02a5e44b3909dd138>2.2.3 - Reservation</h1><div class=lead>Gère l&rsquo;état de réservation des zones</div><h2 id=description>Description</h2><p>Les zones (ou TVDSection / DetectionSection) sont des partitions physiques des voies :</p><ul><li>capables de détecter la présence d&rsquo;un train</li><li>qui fournissent un service de réservation à l&rsquo;usage des routes</li></ul><p>Chaque zone a un certain nombre de configurations différentes.
Par exemple, une zone sans aiguille aura deux configurations :</p><ul><li>sens pair</li><li>sens impair</li></ul><p>Une zone avec une aiguille aura 4 configurations :</p><ul><li>sens pair voie principale</li><li>sens impair voie principale</li><li>sens pair voie déviation</li><li>sens impair voie déviation</li></ul><p><strong>Chaque zone ne peut être réservée que pour une configuration donnée à la fois, mais peut être réservée simultanément par plusieurs routes</strong>.
Une zone ne peut changer de configuration que lorsqu&rsquo;elle n&rsquo;est pas réservée.</p><p>L&rsquo;enclanchement de transit est un enclanchement qui vise à empêcher le mouvement d&rsquo;un appareil de voie lorsqu&rsquo;un train est en approche.
Il concerne les organes de commandes des aiguilles.
un enclanchement est un système qui permet d&rsquo;imposer des ordres de manoeuvre sur un système, soit imposer des interdictions</p><h2 id=exigences-de-conception>Exigences de conception</h2><ul><li>Les zones doivent pouvoir être <strong>vérouillées</strong> dans une configuration particulière.</li><li>Il doit être possible pour plusieurs routes de <strong>partager une réservation</strong> de configuration.</li><li>Il doit être possible d&rsquo;observer l&rsquo;<strong>évolution de statut d&rsquo;une réservation</strong>.</li></ul><h2 id=état>État</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>ZoneReservationStatus</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>IntEnum</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># the head of the train didn&#39;t yet enter the zone</span>
</span></span><span style=display:flex><span>    <span style=color:#000>AWAITING_USE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>auto</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># the train is inside the zone</span>
</span></span><span style=display:flex><span>    <span style=color:#000>IN_USE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>auto</span><span style=color:#000;font-weight:700>()</span> 
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># the train went and left</span>
</span></span><span style=display:flex><span>    <span style=color:#000>AWAITING_RELEASE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>auto</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>ZoneReservation</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#000>train</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>TrainHandle</span>
</span></span><span style=display:flex><span>    <span style=color:#000>status</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>ZoneReservationStatus</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>async</span> <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>wait_for_status</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>status</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>raise</span> <span style=color:#3465a4>NotImplemented</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>async</span> <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>release</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>raise</span> <span style=color:#3465a4>NotImplemented</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>ZoneState</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># the current layout of the zone</span>
</span></span><span style=display:flex><span>    <span style=color:#000>configuration</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>ZoneConfiguration</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># the list of trains which hold a right to use the zone in its current configuration</span>
</span></span><span style=display:flex><span>    <span style=color:#000>reservations</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Set</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>TrainHandle</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># the list of trains currently inside the zone</span>
</span></span><span style=display:flex><span>    <span style=color:#000>occupation</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Set</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>TrainHandle</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@property</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>is_locked</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;&#34;&#34;When any train holds a reservation for a route, the zone cannot change configuration&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>reservations</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>!=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#5c35cc;font-weight:700>@abstractmethod</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>async</span> <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>reserve</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>configuration</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>ZoneReservation</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>raise</span> <span style=color:#3465a4>NotImplemented</span>
</span></span></code></pre></div><h2 id=dépendances>Dépendances</h2><ul><li>une liste de zones</li><li>capacité d&rsquo;observer l&rsquo;occupation des zones</li><li>capacité d&rsquo;actionner les éléments mobiles</li></ul><h2 id=opérations>Opérations</h2><ul><li><strong>cantonnement</strong>: Observer l&rsquo;occupation de la zone</li><li><strong>cantonnement</strong>: Observer la configuration de la zone (?)</li><li><strong>routage</strong>: Réserver une configuration de zone</li><li><strong>routage</strong>: Attendre que la réservation de la zone soit utilisée par son train</li><li><strong>routage</strong>: Relacher une réservation de zone</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-8ad0109aa919c10778b63e2b8f4bfd8e>2.2.4 - Routage</h1><div class=lead>Gère le cycle de vie des itinéraires</div><h2 id=description>Description</h2><ul><li>Les routes sont formées à la demande. Plusieurs demandes peuvent avoir cours en simultané. Il est de la responsabilité du composant qui active les routes de s&rsquo;assurer que les demandes sont faites dans le bon ordre.</li><li>Une route est dite commandée lorsqu&rsquo;un processus d&rsquo;activation est en cours, et elle devient formée lorsque le processus se termine</li><li>Une route peut être activée alors qu&rsquo;un train est déjà en train de la parcourir. Il faut seulement qu&rsquo;il soit possible de réserver les zones dans la bonne configuration.</li></ul><div class="alert alert-info" role=alert>certains postes d&rsquo;aiguillages ont un enclanchement entre itinéraires de sens contraire (affrontement) qui empêche l&rsquo;activation d&rsquo;une route en menant à une zone avec un transit en sens contraire.</div><h2 id=exigences-de-conception>Exigences de conception</h2><ul><li>Le système doit permettre à la <strong>signalisation</strong> de déterminer si la route est <strong>prête à être empruntée</strong>.</li><li>Le système doit permettre l&rsquo;<strong>ordonnancement</strong> des trains selon des critères configurables.</li><li>Le système doit optionnellement permettre la destruction progressive (<strong>transit souple</strong>) de l&rsquo;itinéraire après le passage du train.</li><li>Commande simultanée de l&rsquo;itinéraire</li></ul><h2 id=possibilités-de-design>Possibilités de design</h2><p>La contrainte la plus importante est la réaction des signaux aux itinéraires devant eux. Traditionnellement, les signaux réagissent à la complète formation d&rsquo;une des routes devant eux. Cette formulation, si elle est sûre, impose plusieurs contraintes:</p><ul><li>Il est nécessaire d&rsquo;associer un état à chaque itinéraire.</li><li>Les signaux doivent aggréger l&rsquo;état de tous les itinéraires devant eux. Il peut y en avoir beaucoup.</li></ul><p>Une autre possibilité est d&rsquo;insérer un objet intermédiaire entre le signal et les routes devant lui, qui serait explicitement notifié par le processus d&rsquo;activation de l&rsquo;itinéraire de son état. Il existerait un objet de ce genre par couple <code>(détecteur, direction)</code> d&rsquo;où une route part.</p><p>La seconde option nous semble préférable, car elle permet d&rsquo;avoir un couplage moins fort entre la signalisation et les itinéraires.</p><h2 id=dépendances>Dépendances</h2><ul><li>une liste d&rsquo;élements mobiles</li><li>liste des états possibles de chaque élément mobile</li></ul><h2 id=opérations>Opérations</h2><ul><li><strong>activer une route</strong>: démarre un processus asynchrone qui ne se terminera que lorsque la route aura été réservée. Un objet permettant d&rsquo;attendre que la route soit détruite après le passage du train est retourné</li><li><strong>observer un point d&rsquo;entrée d&rsquo;itinéraire</strong> permet à la signalisation de protéger les appareils de voie</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@dataclass</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>RouteHandle</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#000>route</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Route</span>
</span></span><span style=display:flex><span>    <span style=color:#000>zone_handles</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>List</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>ZoneReservationHandle</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>async</span> <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>release</span><span style=color:#000;font-weight:700>():</span>
</span></span><span style=display:flex><span>        <span style=color:#4e9a06>&#34;&#34;&#34;This method must be awaited on for the route to release reservations behind the train&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>release_group</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>route</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>release_groups</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>            <span style=color:#000>last_zone_index</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>release_group</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>last_zone_index</span>
</span></span><span style=display:flex><span>            <span style=color:#000>zone_handle</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>zone_handles</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>last_zone_index</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>await</span> <span style=color:#000>zone_handle</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>wait_for_status</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>train</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>await</span> <span style=color:#000>last_zone</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>release</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>train</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Route</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>async</span> <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>activate</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>route</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>train</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>RouteHandle</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic># zone_sequence is a list of the zones of the route,</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic># sorted by any absolute order to avoid deadlocks</span>
</span></span><span style=display:flex><span>        <span style=color:#000>handles</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>zone</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>config</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>route</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>zone_reservation_sequence</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>            <span style=color:#000>handles</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>append</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>await</span> <span style=color:#000>zone</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>reserve</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>config</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>train</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic># open and close the entrance signals</span>
</span></span><span style=display:flex><span>        <span style=color:#000>route</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>entry_trigger</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>open</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>await</span> <span style=color:#000>route</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>zones</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>wait_until_train_leaves</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>        <span style=color:#000>route</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>entry_trigger</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>close</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>RouteHandle</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>route</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>handles</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-2a543f4825ceadd99db238fa5e4dbee0>2.2.5 - Espacement</h1><div class=lead>Gère l&rsquo;état des cantons</div><h2 id=couche-de-cantonnement>Couche de cantonnement</h2><p>La couche de cantonnement gère des routes de signal à signal (canton).
Elle permet à la signalisation d&rsquo;observer l&rsquo;état d&rsquo;un groupe
de zones protégées par chaque signal, et de trouver le signal
suivant dans la chaîne.</p><p>Chaque canton porte les informations statiques suivantes:</p><ul><li>les zones protégées par le canton, et leur configuration attendue (ce qui inclus l&rsquo;état des éléments mobiles)</li><li>les signaux de début et de fin (optionnels)</li></ul><p>Un canton est <strong>actif</strong> si tous ses éléments mobiles sont dans la position requise.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>TODO</h4>Un canton devrait-il être actif quand toutes ses zones sont dans la configuration requise ? Dans ce cas, les cantons de sens contraire seront inactifs.</div><h2 id=état>État</h2><p>L&rsquo;état du canton est une combinaison de:</p><ul><li>si toutes les zones sont correctement réservées</li><li>si une des zones est occupée</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000>SignalingRouteState</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>reserved</span>: <span style=color:#204a87;font-weight:700>bool</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>occupied</span>: <span style=color:#204a87;font-weight:700>bool</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Les cantons n&rsquo;ont pas d&rsquo;état persistant. Ils sont à tout instant capables de recalculer leur état.</p><h2 id=opérations>Opérations</h2><ul><li>On peut demander, étant une liste de signaling routes partant du même point, laquelle est <strong>active</strong> (si il y en a une), et son état. Cette opération est commune à la couche d&rsquo;API, et non à une signaling route en particulier.</li></ul><h2 id=exigences-de-conception>Exigences de conception</h2><ul><li>chaque signal doit connaître le <strong>prochain signal compatible</strong></li><li>chaque signal doit connaître les <strong>zones qu&rsquo;il protège</strong></li><li><strong>compatibilité modules signalisation</strong> : les modules doivent créer les cantons entre chaque signaux. Chaque canton a un système de signalisation associé.</li><li><strong>compatibilité pathfinding</strong> : Le pathfinding se fait dans le produit du graphe de routage et du graphe de cantons.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-3b89cfa7c83abb27ce1a6db5b915a633>2.2.6 - Ordonnancement</h1><div class=lead>Décide de l&rsquo;ordre de formation des itinéraires</div><h2 id=définition>Définition</h2><p>La couche d&rsquo;ordonnancement a pour a responsabilité d&rsquo;établir l&rsquo;ordre de commande des itinéraires, et par conséquent, l&rsquo;ordre de passage des trains.
La méthode exacte utilisée pour prendre cette décision n&rsquo;importe pas, du moment qu&rsquo;elle garanti que la simulation se termine (elle ne doit pas amener de trains en nez-à-nez, ou créer d&rsquo;autre cas de figure de blocage).</p><p>Il est possible d&rsquo;implémenter un module d&rsquo;ordonnancement via des tableaux d&rsquo;ordre de succession des trains aux aiguilles.</p><h2 id=exigences-de-conception>Exigences de conception</h2><ul><li>Il doit être possible de connecter n&rsquo;importe quel algorithme d&rsquo;ordonnancement</li><li>Le module d&rsquo;ordonnancement doit blocker puis redémarrer des demandes d&rsquo;itinéraire.</li></ul><h2 id=opérations>Opérations</h2><ul><li><strong>train</strong>: Le train <strong>demande les itinéraires</strong> devant lui, aussi loin qu&rsquo;il peut. Sa demande peut être mise en attente du passage d&rsquo;un autre train.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-1ff9412ee379f9154590bd054b704bee>2.2.7 - Signalisation</h1><div class=lead>Gère l&rsquo;état des signaux</div><h2 id=description>Description</h2><p>La couche de signalisation comprend l&rsquo;ensemble des signaux, qui réagissent au cantonnement et à la réservation.
Les signaux peuvent être de différent types, et sont chargés de manière modulaire. Seul importe leur comportement
vis-à-vis de l&rsquo;état de l&rsquo;infrastructure, et la réaction des trains à la signalisation.</p><h2 id=état>État</h2><p>Chaque système de signalisation a son type d&rsquo;état de signal.</p><p>Étant donné un type de signal, il doit être possible de :</p><ul><li>savoir s&rsquo;il est contraignant</li><li>déterminer une représentation graphique de ce signal</li><li><strong>TODO</strong>: il devra être possible de faire réagit un train à ce signal</li></ul><h2 id=dépendances>Dépendances</h2><ul><li>capacité d&rsquo;observer l&rsquo;état des routes, pour les signaux qui débutent une route</li><li>possibilité d&rsquo;observer l&rsquo;état des cantons devant le signal, de sélectionner le canton actif, et de réagir en fonction de l&rsquo;occupation du canton et du signal de fin de canton</li></ul><h2 id=opérations>Opérations</h2><ul><li><strong>observer le signal</strong></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-0f8ea1a8f1482a3fa7a91a860088c26d>2.2.8 - Train</h1><div class=lead>Représente un train dans la simulation</div><h2 id=description>Description</h2><p>Les contraintes sur ce qu&rsquo;est un train sont relativement faibles.
Il doit seulement avoir un identifiant, qui permet aux autres systèmes de garder des références vers des trains.</p><h2 id=exigences-de-conception>Exigences de conception</h2><ul><li>Les trains <strong>occupent les zones</strong>.</li><li>Les trains doivent être <strong>suivis</strong> pour préserver leur <strong>ordre de passage</strong>.</li><li>Les trains ont pour responsabilité de <strong>demander les itinéraires</strong> devant eux.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-dd37db5b29d390d85797f11e79c4d592>2.3 - Gestion des versions</h1><div class=lead>Gestion des versions de l&rsquo;infrastructure</div></div><div class=td-content style=page-break-before:always><h1 id=pg-b1bbf3a0ceb3ff046e01a45046e51c38>2.4 - Qualité</h1><div class=lead>Gestion de la qualité</div><p>Comment nous apréhendons la qualité chez <a href="https://www.linkedin.com/company/dgex-solutions?originalSubdomain=fr">DGEX Solutions</a></p><blockquote><p>:warning: <strong>En construction</strong></p></blockquote><h2 id=qualité-intégrée>Qualité intégrée</h2><p>Chez OSRD la qualité logicielle fait partie de notre ADN. En complément des pratiques courantes que nous mettons en œuvre pour assurer la qualité du code de nos solutions open source, nous avons la possibilité de nous appuyer sur une vision structurée de pratiques proposée par la méthodologie SAFe et appelée “qualité intégrée”.</p><p>Ces pratiques de “qualité intégrée” garantissent que chaque élément de la solution, à chaque incrément, répond aux normes de qualité appropriées, que nous nous fixons tout au long du développement.</p><p>Ce document regroupe l’ensemble de nos pratiques mises en œuvre, regroupées dans 5 domaines techniques orientés Entreprise qui visent la mise en place :</p><ul><li>d’un flux de travail</li><li>d’une architecture et un design de qualité</li><li>de la qualité de code</li><li>de la qualité Système</li><li>de la qualité de Versionnement</li></ul><p>Nous proposons ici de vous exposer l’état de l’art de notre <strong>qualité intégrée</strong> à travers le prisme de ces 5 domaines, sur le projet <a href=https://github.com/DGEXSolutions/osrd>osrd</a>.</p><h2 id=les-projets>Les projets</h2><p>Nos projets sont hébergés sur <a href=https://github.com/DGEXSolutions>Github</a> et le projet principal d’appelle s’appelle <a href=https://github.com/DGEXSolutions/osrd>osrd</a>. Nous nous appuierons sur ce dernier pour apporter des détails dans ce document.</p><h2 id=les-pratiques>Les pratiques</h2><h3 id=le-flow>Le flow</h3><p>Les équipes agiles fonctionnent souvent de façon itérative afin de développer et publier rapidement des fonctionnalités de grande qualité et c’est notre cas chez OSRD puisque nous sommes certifiés <a href=https://www.atlassian.com/fr/agile/agile-at-scale/what-is-safe>SAFe</a>.</p><p>Nous portons une attention particulière sur :</p><ul><li><strong>la pratique des tests</strong></li><li><strong>la pipeline de Continuous Delivery</strong></li></ul><h4 id=approche-test-first>approche Test-First</h4><p>Nous accordons une importance primordiale à la pratique du test, dans tous les domaines possibles.</p><p>Nous sommes actuellement en train de travailler sur la définition de notre pyramide des tests. Plus précisément, nous amorçons la réflexion sur les tests de bout en bout.</p><p>Nous détaillerons plus en détail cette section dès que possible.</p><h4 id=la-pipeline-de-déploiement-continue>La pipeline de Déploiement Continue</h4><p>Nous avons conscience que l’automatisation de la pipeline de Déploiement Continue est un levier pour accélérer les développements et leur qualité associée en évitant les régressions.</p><p>Notre pipeline est aujourd’hui en place sous Gitlab et permet l’automatisation des déploiements au sein de DGEXSolutions. Son accès reste cependant privé à ce jour.</p><h3 id=architecture-et-qualité-de-conception>Architecture et qualité de conception</h3><h4 id=support-des-besoins-business-futurs>Support des besoins business futurs</h4><p>Le projet OSRD est composé d’une</p><h4 id=conception>Conception</h4><p>Nous essayons de suivre les principes de design orientés objets basés sur le mnémonique <a href=https://fr.wikipedia.org/wiki/SOLID_(informatique)>SOLID</a> qui vise à produire des architectures logicielles plus compréhensibles, flexibles et maintenables :</p><ul><li><a href=https://fr.wikipedia.org/wiki/Principe_de_responsabilit%C3%A9_unique>Responsabilité unique</a></li><li><a href=https://fr.wikipedia.org/wiki/Principe_ouvert/ferm%C3%A9>principe Ouvert/fermé</a></li><li><a href=https://fr.wikipedia.org/wiki/Principe_de_substitution_de_Liskov>Substitution de Liskov</a></li><li><a href=https://fr.wikipedia.org/wiki/Principe_de_s%C3%A9gr%C3%A9gation_des_interfaces>Ségrégation des interfaces</a></li><li><a href=https://fr.wikipedia.org/wiki/Inversion_des_d%C3%A9pendances>Inversion des dépendances</a></li></ul><h4 id=architecturer-et-concevoir-pour-faciliter-les-tests>Architecturer et concevoir pour faciliter les tests</h4><blockquote><p>:warning: <strong>En construction</strong></p></blockquote><h3 id=qualité-du-code>Qualité du code</h3><p>La qualité de code influence la rapidité ainsi que la facilité à laquelle de nouvelles fonctionnalités peuvent être développées.</p><p>Chez DGEX Solutions, nous avons adopté une partie des pratiques issues de l’<a href=https://fr.wikipedia.org/wiki/Extreme_programming>extrême programming</a>.</p><h4 id=tests-unitaires>Tests unitaires</h4><p>Chaque portion du code est testée unitairement selon le composant et son language utilisé.</p><p>Nous .</p><p>Aujourd&rsquo;hui, nous disposons de 2 catégories de tests :</p><ul><li>les tests unitaires</li><li>les tests d’<a href=https://github.com/DGEXSolutions/osrd/blob/dev/.github/workflows/integration_tests.yml>intégration</a></li></ul><h4 id=travail-en-binôme>Travail en binôme</h4><p>Nous pratiquons le travail en binôme de façon assez libre. Cette pratique possède les avantages suivants :</p><ul><li>review et commentaires du code en temps réel</li><li>crée et maintient la qualité</li><li>augmente et élargit les compétences de toute l&rsquo;équipe</li></ul><h4 id=propriété-collective-et-normes-de-codage>Propriété collective et normes de codage</h4><p>Les objectifs sous jacents sont les suivants :</p><ul><li>Chaque contributeur doit pouvoir ajouter une fonctionnalité, corriger un bug, améliorer la conception ou refactorer le code.</li><li>Chacun doit pouvoir comprendre et maintenir la qualité de chacun des composants</li></ul><p>Pour atteindre ces objectifs, nous faisons en sorte que l’ensemble des équipes ait les moyens de s’approprier le code et d’y contribuer facilement.</p><p>Cela passe par une constante remise en question de l&rsquo;accès aux informations pour :</p><ul><li><a href=https://dgexsolutions.github.io/osrd-website/fr/who-we-are/>comprendre le projet</a></li><li><a href=https://dgexsolutions.github.io/osrd-website/en/developers/internals/data-model/usage-example/>comprendre le métier</a></li><li><a href=https://dgexsolutions.github.io/osrd-website/fr/developers/contribute/>contribuer au code</a></li><li><a href=https://dgexsolutions.github.io/osrd-website/fr/developers/internals/>participer à la conception</a></li></ul><h3 id=qualité-du-système>Qualité du système</h3><p>Alors que la qualité de la conception et du code garantissent que les artefacts du système peuvent être facilement compris et modifiés, la qualité du système confirme que le système fonctionne comme prévu et que tout le monde est aligné sur les modifications à apporter.</p><h4 id=saligner-pour-accélérer>S’aligner pour accélérer</h4><p>Nos pratiques Agiles et notamment nos pratiques SAFe créent un alignement entre les différentes équipes sur les objectifs à atteindre au niveau système. Cela crée de la cohésion et permet d’optimiser le flux de développement du système dans sa globalité.</p><p>Au niveau de l’équipe, il est également possible de s’aligner en utilisant le <a href="https://fr.wikipedia.org/wiki/Programmation_pilot%C3%A9e_par_le_comportement#:~:text=La%20programmation%20pilot%C3%A9e%20par%20le,participant%20%C3%A0%20un%20projet%20logiciel.">Behavior-Driven Development</a>. Il s’agit d’une pratique collaborative où le Product Owner et les membres de l&rsquo;équipe s&rsquo;accordent sur le comportement précis d&rsquo;une histoire ou d&rsquo;une fonctionnalité. L&rsquo;application de BDD aide les développeurs à créer le bon comportement dès la première fois et réduit les reprises et les erreurs. Aujourd’hui, nous ne pratiquons pas de BDD.</p><h4 id=integration-continue>Integration continue</h4><p>Notre système d’<a href=https://github.com/DGEXSolutions/osrd/actions>intégration continue</a> fonctionne sous Github via l’utilisation d’<a href=https://docs.github.com/en/actions>actions</a>.</p><h5 id=les-tests-unitaires>Les tests unitaires</h5><p>Chaque composant du monorepo possède sa propre action Github permettant de :</p><ul><li>lancer les tests unitaires</li><li>lancer une analyse de couverture du code via Codecov</li><li>lancer un contrôle sur le respect de règles de codifications via Checkstyle</li></ul><p>Voici la <a href=https://github.com/DGEXSolutions/osrd/tree/dev/.github/workflows>liste</a> de chaque composant :</p><ul><li><a href=https://github.com/DGEXSolutions/osrd/blob/dev/.github/workflows/api.yml>api</a></li><li><a href=https://github.com/DGEXSolutions/osrd/blob/dev/.github/workflows/core.yml>core</a></li><li><a href=https://github.com/DGEXSolutions/osrd/blob/dev/.github/workflows/chartos.yml>chartos</a></li><li><a href=https://github.com/DGEXSolutions/osrd/blob/dev/.github/workflows/editoast.yml>editoast</a></li><li><a href=https://github.com/DGEXSolutions/osrd/blob/dev/.github/workflows/front.yml>front</a></li></ul><h5 id=les-tests-dintégration>Les tests d’intégration</h5><p>Nous appliquons des <a href=https://github.com/DGEXSolutions/osrd/blob/dev/.github/workflows/integration_tests.yml>tests d’intégration</a> à chacun de nos systèmes.</p><blockquote><p>:warning: <strong>En construction</strong></p></blockquote><h3 id=qualité-du-versionnement>Qualité du versionnement</h3><h4 id=gestion-des-versions>Gestion des versions</h4><p>Vous pouvez trouver plus de détails sur cette <a href=https://dgexsolutions.github.io/osrd-website/fr/developers/internals/versionning/>page</a>.</p><h4 id=versionnement-à-la-demande>Versionnement à la demande</h4><p>Le versionnement à la demande est le processus qui déploie de nouvelles fonctionnalités en production et les publie immédiatement ou progressivement en fonction de la demande des clients.</p><p>Aujourd’hui, en raison de contrainte d’accès à des données privées, la partie Déploiement Continue est gérée dans un repository privé à part.</p><p>OSRD est déployé de façon <a href=https://fr.wikipedia.org/wiki/Livraison_continue>continue</a>, pour chaque commit réalisé sur la branche <a href=https://github.com/DGEXSolutions/osrd/tree/dev>dev</a>.</p><p>Aucun mécanisme de versionnement n’est aujourd’hui utilisé sur Github.</p><h4 id=definition-of-done>Definition of Done</h4><p>La <strong>Definition of Done</strong> (DoD) est une liste claire et concise d&rsquo;exigences à respecter pour qu’une fonctionnalité développée par l&rsquo;équipe puisse être qualifiée de “faite”.</p><p>Là où nos critères d’acceptance s’appliquent de façon unique à toutes nos fonctionnalités, la Definition of Done est une liste unique pour chaque story.</p><p>Nous utilisons des templates Github afin de garantir que chaque ticket est correctement structuré autour de la DoD et des critères d’acceptance :</p><ul><li><a href=https://github.com/DGEXSolutions/osrd/blob/dev/.github/ISSUE_TEMPLATE/feature.md>feature</a></li><li><a href=https://github.com/DGEXSolutions/osrd/blob/dev/.github/ISSUE_TEMPLATE/enabler_story.md>enabler story</a></li><li><a href=https://github.com/DGEXSolutions/osrd/blob/dev/.github/ISSUE_TEMPLATE/user_story.md>user story</a>## Qualité intégrée</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-a2713c6c3fd5c67da4c8f4dfa193294d>2.5 - Technical documentation</h1><div class=lead>Documentation Javadoc du projet Core dans OSRD</div><p>Documentation Javadoc du projet Core dans OSRD</p></div><div class=td-content><h1 id=pg-527b0f05ab1d076407ca64a3c600e994>2.5.1 - Core</h1><div class=lead>Javadoc du service Core</div><script type=text/javascript>function resizeIframe(e){e.height=e.contentWindow.document.body.scrollHeight+"px"}</script><iframe id=iframe-id src=/osrd-website/javadoc/index.html width=100% name=iframe-name style=min-height:98vh;border:none onload=resizeIframe(this) referrerpolicy=no-referrer><p>Your browser can not display embedded frames. You can access the embedded page via the following link: <a href=/osrd-website/javadoc/index.html>/osrd-website/javadoc/index.html</a></p></iframe></div><div class=td-content style=page-break-before:always><h1 id=pg-a7afec2a6360299976014319fa6425cc>3 - Wiki Ferroviaire</h1><div class=lead>Wiki ferroviaire international</div><p>Malheureusement, développer des logiciels ferroviaires est difficile. Une des principales raison
est que les systèmes ferroviaires sont à la fois complexes et faciles à simplifier.
Le coût de transformer un développeur logiciel en expert ferroviaire étant énorme, cette
formation est progressive.</p><p>Ce manque de compréhension initiale rend les erreurs de compréhension et de modélisation très,
très, très faciles à commettre.</p><p>Ce wiki a pour objectif de rendre accessible aux développeurs des informations sur le monde ferroviaire.</p><p><strong>Cela ne peut se produire que si le contenu est ajouté lorsque nécessaire. Si quelque chose manque, contribuez !</strong></p></div><div class=td-content style=page-break-before:always><h1 id=pg-017d696c044a7d5a1a401bd7e5245ea1>3.1 - Glossaire</h1><div class=lead>Glossaire thématique d&rsquo;OSRD et du ferroviaire</div><p>À compléter : ouvrez une issue en cas de mot manquant</p><h3 id=a>A</h3><ul><li><strong>ADV</strong> : Appareil de voie</li></ul><h3 id=b>B</h3><ul><li><strong>BA</strong> : Block automatique</li><li><strong>BAL</strong> : Block automatique lumineux</li><li><strong>BAPR</strong> : Block automatique à permissivité restreinte</li><li><strong>BM</strong> : Block manuel</li><li><strong>BMCV</strong> : BM par circuit de voie</li><li><strong>BMVU</strong> : BM de voie unique</li></ul><h3 id=c>C</h3><ul><li><strong>CAPI</strong> : Cantonnement assisté par informatique</li><li><strong>CC</strong> : Commande et contrôle</li><li><strong>COVIT</strong> : Contrôle de vitesse</li><li><strong>CT</strong> : Cantonnement téléphonique</li></ul><h3 id=d>D</h3><ul><li><strong>DAAT</strong> : Dispositif d’arrêt automatique des trains</li><li><strong>DMI</strong> : Driver machine interface : dispositif qui permet la communication entre le système bord et le conducteur</li><li><strong>DV</strong> : Double voie</li></ul><h3 id=e>E</h3><ul><li><strong>EOA</strong> : End of authority (fin d’autorisation de mouvement)</li><li><strong>EPSF</strong> : Établissement public de sécurité ferroviaire</li><li><strong>ETCS</strong> : European train control system (système européen de contrôle commande des trains)</li><li><strong>ERTMS</strong> : European rail traffic management system (système européen de gestion du trafic ferroviaire)</li><li><strong>EVC</strong> : European vital computer. (ordinateur européen de sécurité) : calculateur de bord qui supervise la marche du train en fonction des données sol et bord</li></ul><h3 id=f>F</h3><ul><li><strong>FA</strong> : Fermeture automatique</li><li><strong>FS</strong> : Full supervision (supervision complète) : mode technique dans lequel le train est supervisé en vitesse et déplacement = marche normale attribuée au train</li></ul><h3 id=g>G</h3><ul><li><strong>GI</strong> : Gestionnaire d’infrastructure</li><li><strong>GSM/GFU</strong> : Global system for mobile communication/Groupe fermé d’utilisateurs</li><li><strong>GSM-R</strong> : Global system for mobile communication railways (Système de communication téléphonique pour mobile dédié aux chemins de fer)</li><li><strong>GSM-R Data</strong> : Système de transmission de données entre les installations « sol » et les installations « bord » via le réseau GSM-R</li></ul><h3 id=i>I</h3><ul><li><strong>ICS</strong> : Installations de circulation à contre-sens</li><li><strong>IPCS</strong> : Installations permanentes de contre-sens</li><li><strong>IS</strong> : Installation de sécurité</li><li><strong>ITCS</strong> : Installations temporaires de contre-sens</li></ul><h3 id=j>J</h3><ul><li><strong>JRU</strong> : Juridical recording unit (Enregistreur des paramètres d’exploitation)</li></ul><h3 id=k>K</h3><ul><li><strong>KVB</strong> : Contrôle de vitesse par balises</li></ul><h3 id=l>L</h3><ul><li><strong>LEU</strong> : Line side electronic unit (codeur ERTMS)</li><li><strong>LGV</strong> : Ligne à grande vitesse</li></ul><h3 id=m>M</h3><ul><li><strong>MA</strong> : Movement authority : autorisation donnée à un train de circuler vers un point donné en tant que mouvement supervisé</li></ul><h3 id=n>N</h3><ul><li><strong>Nf</strong> : Non franchissable</li><li><strong>NL</strong> : Non leading (non en tête) : Mode technique de circulation utilisé pour la double traction ou la pousse</li></ul><h3 id=o>O</h3><ul><li><strong>OS</strong> : On sight (conduite à vue) : mode technique de circulation qui autorise le conducteur à s’avancer en marche à vue. En ETCS1, le mode OS accompagné du message textuel national « Voie de service » impose la marche en manoeuvre pour la réception sur voie de service</li></ul><h3 id=p>P</h3><ul><li><strong>PI ETCS</strong> : Point d’information ETCS : constitué d’une ou plusieurs balises transmettant des informations vers le bord (par exemple PI avancé ou PI signal)</li><li><strong>PL</strong> : Pleine ligne</li><li><strong>PLD</strong> : Point limite de domaine : point où une transition entre ETCS et un autre système de signalisation a lieu</li><li><strong>PN</strong> : Passage à niveau</li></ul><h3 id=r>R</h3><ul><li><strong>RBC</strong> : Radio block center : système centralisé fonctionnant avec les enclenchements afin d’établir et de contrôler l’espacement et le mouvement des trains en envoyant et recevant des informations par radio en ETCS2 ou 3</li><li><strong>RST</strong> : Radio sol-train</li><li><strong>RT</strong> : Renseignement technique</li><li><strong>RV</strong> : Reversing (refoulement) : mode technique de circulation utilisé pour permettre au train de reculer d&rsquo;urgence sans signaux ni ordre dans une zone prédéfinie. Ce mode n&rsquo;est pas utilisé sur le RFN</li></ul><h3 id=s>S</h3><ul><li><strong>SGS</strong> : Système de gestion de la sécurité</li><li><strong>SH</strong> : Shunting (manoeuvre) : mode technique de circulation manoeuvre</li><li><strong>SN</strong> : System national : mode technique de circulation de niveau STM</li><li><strong>SR</strong> : Staff responsible (responsabilité agent) : mode technique de circulation utilisé dans les situations dégradées. Il est utilisable sous la responsabilité respective de l’agent-circulation et du conducteur</li><li><strong>STM</strong> : Specific transmission module (Module spécifique de transmission) : ce dispositif permet à l’ETCS d’utiliser un système de signalisation national</li></ul><h3 id=t>T</h3><ul><li><strong>TECS</strong> : Tableau lumineux d’entrée à contre sens</li><li><strong>TIV</strong> : Tableau indicateur de vitesse</li><li><strong>TR</strong> : Trip : mode technique de circulation entraînant une application irréversible du freinage d’urgence par le système ETCS jusqu’à l’arrêt du train</li><li><strong>TSCS</strong> : Tableau lumineux de sortie à contre sens</li><li><strong>TVM</strong> : Transmission voie machine</li></ul><h3 id=v>V</h3><ul><li><strong>VB</strong> : Voie banalisée</li><li><strong>VP</strong> : Voie principale</li><li><strong>VS</strong> : Voie de service</li><li><strong>VU</strong> : Voie unique</li><li><strong>VUT</strong> : Voie unique temporaire</li><li><strong>VUTP</strong> : Voie unique temporaire à caractère permanent</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-069dee5d3979633c876226a775237408>3.2 - Signalisation</h1><div class=lead>Les signaux, régimes d&rsquo;exploitation des trains, et les systèmes d&rsquo;espacement des trains</div><p>Cette section est destinée à exposer les principes généraux relatifs :</p><ul><li>aux signaux</li><li>aux régimes d’exploitation des lignes (à venir)</li><li>aux différents systèmes d’espacement des trains</li></ul><p><img src=images/document-pedagogique-signaux-regimes-exploitation-v1/image-001.png alt></p><p>La grande majorité des informations de cette section sont extraites du <strong><em>document pédagogique de l&rsquo;Établissement Public de
Sécurité Ferroviaire (EPSF)</em></strong> édité le 05 juillet 2017.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-60055148750cd5a6034dce390a86fa96>3.2.1 - Les systèmes d'espacement des trains</h1><div class=lead>Les signaux, régimes d&rsquo;exploitation des trains, et les systèmes d&rsquo;espacement des trains</div><h3 id=définition>Définition</h3><p>Le système d’espacement des trains de même sens, est destiné à éviter les rattrapages et consiste à fractionner la ligne
en plusieurs cantons dont l’entrée est protégée par un signal d’arrêt.</p><h3 id=principe>Principe</h3><p>Compte tenu de leur masse importante, de leur vitesse élevée, de la faible adhérence rail-roue, les trains ont besoin
d’une distance importante pour s’arrêter.</p><p>De ce fait, la distance nécessaire pour obtenir l’arrêt est généralement plus grande que la partie de voie visible par
le conducteur. Dans ces conditions, le conducteur d’un train en marche ne voyant pas à temps la queue d’un train arrêté
ou circulant à plus faible vitesse devant lui risquerait de le heurter.</p><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-078.png alt></p><p>Pour prévenir le risque de rattrapage : un dispositif d’espacement des trains appelé « cantonnement » est mis en place
selon les principes suivants :</p><ul><li>la ligne est divisée en portions de voie appelées « cantons » ;</li><li>l’entrée de chaque canton est normalement commandée par un signal ;</li><li>un seul train est normalement admis dans chaque canton.</li><li>aucun train ne peut normalement pénétrer dans un canton occupé, du fait du maintien à la fermeture du signal d’entrée
du canton durant tout le temps de son occupation.</li></ul><p>Dans certains cas particuliers, la pénétration d’un train dans un canton occupé ainsi que les modalités de
franchissement du signal d’entrée du canton sont prévues dans une procédure propre à chaque mode de cantonnement.</p><h4 id=les-différents-modes-de-cantonnement>Les différents modes de cantonnement</h4><p>On distingue :</p><ul><li>le cantonnement téléphonique ;</li><li>le block manuel par appareils (BM) ;</li><li><a href=./automatic_block_systems/>le block automatique</a> : lumineux (BAL) ou à permissivité restreinte (BAPR) ;</li><li>l’ETCS 1 généralement superposé à la signalisation au sol ;</li><li>l’espacement sur lignes à grande vitesse (TVM, <a href=./ertms/>ETCS 2</a>).</li></ul><p>Sur les sections de lignes équipées en cantonnement téléphonique ou en block manuel par appareils, les signaux de
cantonnement sont manoeuvrés au sol ou depuis des postes par des agents du service du gestionnaire d’infrastructure (GI)
chargé de la gestion des circulations dénommés « gardes ».</p><p>Sur les sections de lignes équipées en BAL ou BAPR, les signaux de cantonnement se ferment automatiquement dès
l’occupation du canton et restent fermés jusqu’à sa complète libération.</p><p>Sur les sections de lignes à signalisation de cabine, équipées en TVM ou ETCS, les informations liées à l’espacement des
trains sont données au conducteur automatiquement directement en cabine de conduite.</p><p>Pour déterminer le mode et le cas échéant les postes de cantonnement d’une section de ligne, il faut consulter les RT.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-020d1a5c76f0a597d16cdd5eb7880bb9>3.2.1.1 - Block Automatique (BA)</h1><h3 id=principe>Principe</h3><p>Le block automatique se caractérise en block automatique lumineux (BAL) et en block automatique à permissivité restreinte (BAPR) par :</p><ul><li>le fonctionnement entièrement automatique des signaux de cantonnement dont le changement d’état (fermeture ou ouverture) est provoqué par le passage des circulations sans aucune intervention humaine ;</li><li>l’état d’occupation de chaque canton, agissant directement sur le signal d’entrée correspondant est obtenu par le circuit de voie en BAL, généralement par un comptage d’essieu en BAPR.
Le BAL permet un débit élevé des circulations sur la ligne.</li></ul><h3 id=fonctionnement-dun-circuit-de-voie>Fonctionnement d&rsquo;un circuit de voie</h3><p>Un circuit de voie est principalement constitué de trois éléments :</p><ul><li>un émetteur, branché à l’une des extrémités de la zone. Il délivre un courant qui peut être de différente nature selon les types de circuit de voie (continu, impulsionnel, alternatif, etc.) ;</li><li>une ligne de transmission, constituée par les deux files de rails ;</li><li>un récepteur, branché à l’autre extrémité de la zone. Il assure le filtrage, l’amplification et la transformation du signal reçu via les rails, ce qui agit sur un relais appelé relais de voie. Les contacts de ce relais sont utilisés pour établir ou couper le circuit électrique du signal d’entrée du canton.</li></ul><p>Lorsqu’aucun véhicule n’est présent sur la zone délimitant le circuit de voie (voie libre), le signal délivré par l’émetteur parvient au récepteur à travers la ligne de transmission, et le relais de voie est excité. Le feu d’entrée du canton est à voie libre (cas 1 ci-dessous).</p><p>Lorsqu’un véhicule est présent, son premier essieu agit comme une faible résistance, appelée shunt, qui court-circuite la transmission. Dans ce cas, le niveau du signal parvenant au récepteur n’est plus suffisant et le relais de voie se désexcite, ce qui entraine la fermeture du signal d’entrée du canton (cas 2 ci-dessous).</p><p><img src=../../images/document-pedagogique-signaux-regimes-exploitation-v1/image-079.png alt></p><h3 id=fonctionnement-des-compteurs-dessieux>Fonctionnement des compteurs d&rsquo;essieux</h3><p>Un compteur d’essieux est un dispositif technique servant à détecter la présence d’une circulation sur une section, par
comptage des essieux qui franchissent les détecteurs encadrant cette section.</p><p>Un point de détection est installé à chaque extrémité de la section, et chaque fois qu’un essieu passe sur ce point au
début de la section, un compteur s’incrémente. Quand le train passe sur le point de détection en fin de la section, le
compteur décrémente. Si le nombre final est zéro, la section est présumée libre pour un deuxième train et le signal
d’entrée du canton présentera l’indication « voie libre ».</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f60098d1f79dc88e28a465556617dcdc>3.2.1.1.1 - BAL</h1><div class=lead>Block Automatique Lumineux</div><p>Le signal d’entrée du canton présente une indication liée à l’état d’occupation du ou des cantons suivants, selon les
règles suivantes :</p><ul><li>indication d’arrêt lorsque le canton est occupé par au moins une portion du train</li><li>annonce lorsque le canton suivant est occupé</li><li>voie libre par défaut (sauf signaux Nf)</li></ul><p>La longueur maximale d’un canton est en principe de 2800 m. Elle est généralement de 1500 m sur les lignes parcourues à
la vitesse maximale de 160 km/h.</p><p><img src=../../images/document-pedagogique-signaux-regimes-exploitation-v1/image-080.png alt></p><h3 id=avantages-du-bal>Avantages du BAL</h3><p>Le BAL offre un niveau élevé de sécurité et permet un débit important.</p><h3 id=limites>Limites</h3><p>L’installation du BAL est très coûteuse, et son fonctionnement nécessite une garantie de contact électrique entre la
roue et le rail.</p><h3 id=implémentation>Implémentation</h3><p>Simuler correctement le système BAL nécessite de respecter les critères suivants :</p><ul><li>lorsque la tête du train pénètre dans un canton, le signal d&rsquo;entrée de celui-ci passe en indication d&rsquo;arrêt</li><li>lorsque la queue du train libère un canton, son signal d&rsquo;entrée passe en annonce</li><li>lorsque la queue du train libère un canton, le signal d&rsquo;entrée du canton précédent passe en voie libre</li><li>les signaux présentent une voie libre par défaut, sauf les signaux Nf qui sont par défaut en indication d&rsquo;arrêt</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-df767392033b23ea3ad6e798d252568e>3.2.1.1.2 - BAPR</h1><div class=lead>Block Automatique à Permitivité Restreinte</div><p>Le signal d’entrée du canton est un signal qui présente une indication liée à l’état d’occupation du canton suivant
(indication d’arrêt ou de voie libre). Sur certaines lignes l’occupation du canton n’est pas obtenue par le circuit de
voie mais par un système de comptage d’essieux entrants et sortants.</p><p>Les cantons sont beaucoup plus longs que le BAL (jusqu’à 15 km et plus) et par conséquent le débit est moins important.</p><p><img src=../../images/document-pedagogique-signaux-regimes-exploitation-v1/image-081.png alt></p><p><img src=../../images/document-pedagogique-signaux-regimes-exploitation-v1/image-082.png alt></p><h3 id=avantages-du-bapr>Avantages du BAPR</h3><p>Le BAPR offre un bon niveau de sécurité et il est moins coûteux que le BAL.</p><h3 id=limites>Limites</h3><p>Ce type de block n’est adapté qu’aux lignes conventionnelles à trafic moyen compte tenu de l’espacement imposé entre 2
trains successifs.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-e01159cc2509e9b8a7a7388d4bd95a49>3.2.1.2 - ETCS (ERTMS)</h1><div class=lead>European Train Control System, inclu dans ERTMS</div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=LinkedIn aria-label=LinkedIn><a class=text-white target=_blank rel=noopener href=https://www.linkedin.com/company/dgex-solutions/ aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/dgexsolutions aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/DGEXSolutions/osrd aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://example.org/slack aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 DGEX Solutions Tous droits réservés</small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/mermaid@8.13.4/dist/mermaid.min.js integrity="sha512-JERecFUBbsm75UpkVheAuDOE8NdHjQBrPACfEQYPwvPG+fjgCpHAz1Jw2ci9EXmd3DdfiWth3O3CQvcfEg8gsA==" crossorigin=anonymous></script><style>.markmap>svg{width:100%;height:300px}</style><script>window.markmap={autoLoader:{manual:!0}}</script><script src=https://cdn.jsdelivr.net/npm/markmap-autoloader></script>
<script src=/js/tabpane-persist.js></script>
<script src=/osrd-website/js/main.min.388e1698db452a79196d63fdb03f54c101b02ecbf065f125f580520ae8be8551.js integrity="sha256-OI4WmNtFKnkZbWP9sD9UwQGwLsvwZfEl9YBSCui+hVE=" crossorigin=anonymous></script></body></html>