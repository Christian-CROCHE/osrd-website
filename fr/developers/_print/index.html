<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=fr class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><link rel=canonical type=text/html href=https://dgexsolutions.github.io/osrd-website/fr/developers/><link rel=alternate type=application/rss+xml href=https://dgexsolutions.github.io/osrd-website/fr/developers/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/osrd-website/favicons/favicon.ico><link rel=apple-touch-icon href=/osrd-website/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/osrd-website/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/osrd-website/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/osrd-website/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/osrd-website/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/osrd-website/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/osrd-website/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/osrd-website/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/osrd-website/favicons/android-192x192.png sizes=192x192><title>Développeurs | OSRD</title><meta name=description content="Vous souhaitez contribuer à OSRD, ou simplement en comprendre le fonctionnement? Cette documentation est pour vous!
"><meta property="og:title" content="Développeurs"><meta property="og:description" content="Open Source Railway Designer"><meta property="og:type" content="website"><meta property="og:url" content="https://dgexsolutions.github.io/osrd-website/fr/developers/"><meta property="og:image" content="https://dgexsolutions.github.io/osrd-website/fr/developers/_print/featured-background.jpg"><meta property="og:site_name" content="OSRD"><meta itemprop=name content="Développeurs"><meta itemprop=description content="Open Source Railway Designer"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://dgexsolutions.github.io/osrd-website/fr/developers/_print/featured-background.jpg"><meta name=twitter:title content="Développeurs"><meta name=twitter:description content="Open Source Railway Designer"><link rel=preload href=/osrd-website/scss/main.min.de203f4f1cf6008c49fefc8ebcf649bd2d3e797e86169ee00a73f01456105812.css as=style><link href=/osrd-website/scss/main.min.de203f4f1cf6008c49fefc8ebcf649bd2d3e797e86169ee00a73f01456105812.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/osrd-website/fr/><span class=navbar-logo><svg id="Calque_1" data-name="Calque 1" viewBox="0 0 64 64" sodipodi:docname="logo_osrd_seul_blanc.svg" width="64" height="64" inkscape:version="1.1.2 (0a00cf5339, 2022-02-04)" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"><sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="3440" inkscape:window-height="1380" id="namedview47" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:zoom="3.0016455" inkscape:cx="12.992873" inkscape:cy="71.294228" inkscape:window-x="0" inkscape:window-y="32" inkscape:window-maximized="1" inkscape:current-layer="Calque_1" inkscape:pagecheckerboard="0"/><defs id="defs4"><style id="style2">.cls-1,.cls-2,.cls-3,.cls-4,.cls-7{fill:none;stroke-linecap:round;stroke-linejoin:round}.cls-1,.cls-4{stroke:#aa026d}.cls-1,.cls-2{stroke-width:10px}.cls-2,.cls-3{stroke:#71196f}.cls-3,.cls-4{stroke-width:5px}.cls-5,.cls-6{font-size:119.48px}.cls-5{fill:#71196f;font-family:AvenirLTStd-Heavy,Avenir LT Std}.cls-6{fill:#aa026d;font-family:AvenirLTStd-Medium,Avenir LT Std}.cls-7{stroke:#fff;stroke-width:.75px}</style></defs><title id="title6">logo-OSRD_</title><g id="g847" transform="matrix(0.09645818,0,0,0.09645818,7.1489968,-1.215e-6)"><path inkscape:connector-curvature="0" class="cls-1" d="m389.52 658.5v-88c0-199.26-91.83-331.42-279.82-362" id="path8" style="stroke:#f2f2f2;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-1" d="m298.5 658.5v-87.07c0-156.89-75.34-258.73-229.71-276" id="path10" style="stroke:#f2f2f2;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-2" d="m216.77 658.5v-70.49c0-121.76-58.68-200.64-178.91-213.6" id="path12" style="stroke:#a0a0a0;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-2" d="M125.74 658.5V617.36C125.74 533.21 86.13 478 5 466.95" id="path14" style="stroke:#a0a0a0;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-2" d="m125.74 658.5v-88c0-199.26 91.84-331.42 279.83-362" id="path16" style="stroke:#a0a0a0;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-2" d="m216.77 658.5v-87.07c0-156.89 75.34-258.73 229.71-276" id="path18" style="stroke:#a0a0a0;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-1" d="m298.5 658.5v-70.49c0-121.76 58.68-200.64 178.91-213.6" id="path20" style="stroke:#f2f2f2;stroke-opacity:1"/><path inkscape:connector-curvature="0" class="cls-1" d="m389.52 658.5v-41.14c0-84.15 39.62-139.36 120.75-150.41" id="path22" style="stroke:#f2f2f2;stroke-opacity:1"/><line class="cls-3" x1="126" y1="642.5" x2="126" y2="122.5" id="line24" style="stroke:#a0a0a0;stroke-opacity:1"/><line class="cls-3" x1="217" y1="642.5" x2="217" y2="2.5" id="line26" style="stroke:#a0a0a0;stroke-opacity:1"/><line class="cls-4" x1="299" y1="642.5" x2="299" y2="2.5" id="line28" style="stroke:#f7f7f7;stroke-opacity:1"/><line class="cls-4" x1="390" y1="642.5" x2="390" y2="122.5" id="line30" style="stroke:#f2f2f2;stroke-opacity:1"/></g></svg></span><span class=font-weight-bold>OSRD</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/osrd-website/fr/who-we-are/><span>Qui sommes-nous ?</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/osrd-website/fr/users/><span>Utilisateurs</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/osrd-website/fr/developers/><span class=active>Développeurs</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/osrd-website/fr/partnership/><span>Partenariats</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/osrd-website/fr/news/><span>News</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Français</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/osrd-website/en/developers/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Rechercher" aria-label=Rechercher autocomplete=off data-offline-search-index-json-src=/osrd-website/offline-search-index.4e509f1321cf822765a07ceecaed5e04.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>Version imprimable multipages.
<a href=# onclick="return print(),!1">Cliquer ici pour imprimer</a>.</p><p><a href=/osrd-website/fr/developers/>Retour à la version par défaut</a>.</p></div><h1 class=title>Développeurs</h1><ul><li>1: <a href=#pg-650057b72461c10e8189af8a1759e613>Contribuer</a></li><ul><li>1.1: <a href=#pg-f1426c0a8df88bfc815870310f05dc01>Licence</a></li><li>1.2: <a href=#pg-928afd58432c90ae89cd91b8c7b8c7ad>Mise en place</a></li><li>1.3: <a href=#pg-5743941a8788eded1c2c90838d3d552f>Suivi des bugs</a></li><li>1.4: <a href=#pg-bfeab1c04aedcd54c6ec9161ed206978>Contribuer du code</a></li><li>1.5: <a href=#pg-3b1e58bad9e821c57de46582bee4ab5a>Passer du code en revue</a></li><li>1.6: <a href=#pg-9dd6bbcecc288c1a96bda2a504038594>Conventions de style</a></li><ul><li>1.6.1: <a href=#pg-f08850af3b1b9fa46814484d453e7de9>Style des commits</a></li></ul></ul><li>2: <a href=#pg-e3f26d5cf03ef3199fed6f928428f0ba>Architecture</a></li><li>3: <a href=#pg-1f0bf572996bfd51989f5393e03203e8>Modèle de données</a></li><ul><li>3.1: <a href=#pg-305403a703aa50dd850658f3c6e40df2>Exemple d'utilisation</a></li><li>3.2: <a href=#pg-1eea0849fd03cd6a3eed907d266e519e>Liste des APIs</a></li><ul><li>3.2.1: <a href=#pg-adb84c608bd0e376369f0ac7611c5ba0>API</a></li><li>3.2.2: <a href=#pg-40ed16637b03918ce629413525d6f01b>Chartos</a></li><li>3.2.3: <a href=#pg-1fccf0195300e3099a26fceea3ec03ad>Core</a></li><li>3.2.4: <a href=#pg-34b2c8b304f10f76cfc5c78e32d7919a>Editoast</a></li></ul></ul><li>4: <a href=#pg-c70048f8f396ac5c0d77d9983feb19e3>Modèle de simulation de la signalisation et des aiguillages</a></li><ul><li>4.1: <a href=#pg-5e9f2a5678aaf506b5723f8f6e66b2bf>Éléments mobiles</a></li><li>4.2: <a href=#pg-b4b6c3c60bf3b7f2488afdb83fb94134>Localisation</a></li><li>4.3: <a href=#pg-2e69058a60c3be16549d405b409b3391>Reservation</a></li><li>4.4: <a href=#pg-562c5c818f4dae853cf7acd8c99c81ca>Routage</a></li><li>4.5: <a href=#pg-ffd3fd228f3e0f42d4dc6baaa1789002>Espacement</a></li><li>4.6: <a href=#pg-189391d0122ca17f60e2cede500d85bc>Ordonnancement</a></li><li>4.7: <a href=#pg-87317323fee49f1608c621194da98fb7>Signalisation</a></li><li>4.8: <a href=#pg-ad9fd21c42c169d0d20bb946cb8fec52>Train</a></li></ul><li>5: <a href=#pg-c4a9ceb2c86ff592a7ca0acf6b157983>Détection de conflit</a></li><li>6: <a href=#pg-b1785ebc56cebd1887c276b5797e2fec>Gestion des versions</a></li><li>7: <a href=#pg-a7afec2a6360299976014319fa6425cc>Wiki Ferroviaire</a></li><ul><li>7.1: <a href=#pg-017d696c044a7d5a1a401bd7e5245ea1>Glossaire</a></li><ul></ul><li>7.2: <a href=#pg-069dee5d3979633c876226a775237408>Signalisation</a></li><ul><li>7.2.1: <a href=#pg-888e3078052fd69049907ba0a120d674>Les signaux</a></li><ul></ul><li>7.2.2: <a href=#pg-60055148750cd5a6034dce390a86fa96>Les systèmes d'espacement des trains</a></li><ul><li>7.2.2.1: <a href=#pg-020d1a5c76f0a597d16cdd5eb7880bb9>BA</a></li><ul><li>7.2.2.1.1: <a href=#pg-f60098d1f79dc88e28a465556617dcdc>BAL</a></li><li>7.2.2.1.2: <a href=#pg-df767392033b23ea3ad6e798d252568e>BAPR</a></li></ul><li>7.2.2.2: <a href=#pg-e01159cc2509e9b8a7a7388d4bd95a49>ERTMS</a></li><ul><li>7.2.2.2.1: <a href=#pg-f5d93bfed9636387eb24298e7ecc5ee0>ETCS</a></li><li>7.2.2.2.2: <a href=#pg-9db26aeed5b5d59762545310929d3cc5>GSM-R</a></li><li>7.2.2.2.3: <a href=#pg-b0d4d9c0f9100dc8d7e3b2e403c35029>GPRS</a></li><li>7.2.2.2.4: <a href=#pg-1dd2a3c11580b925c8defb5b3b76c9cd>FRMCS</a></li><li>7.2.2.2.5: <a href=#pg-903f9b0c14aa9a4d3b185646aeb45e8a>ETML</a></li></ul></ul></ul></ul><li>8: <a href=#pg-c912e2282d1c8807013bac4ce08861ce>JSON Schemas</a></li><ul></ul><li>9: <a href=#pg-f347e8a68ab88feb2dbd40d7268e3b66>Documentation du code source</a></li><ul><li>9.1: <a href=#pg-e5ecf02cfae3164a13a9096038e2ac6b>Core</a></li></ul></ul><div class=content><p>Vous souhaitez contribuer à OSRD, ou simplement en comprendre le fonctionnement? Cette documentation est pour vous!</p></div></div><div class=td-content><h1 id=pg-650057b72461c10e8189af8a1759e613>1 - Contribuer</h1><div class=lead>Comment apporter sa pierre à l&rsquo;édifice</div><p>Déjà, merci d&rsquo;avoir pris le temps de contribuer !</p><p>Si les sections suivantes forment un guide du contributeur, ce n&rsquo;est pas pour autant un ensemble de règles strictes. En fait, si vous avez déjà contribué à des gros projets opensource, la suite ne sera pas surprenante. Dans le cas contraire, elle vous sera probablement très utile !</p><h3 id=communiquer>Communiquer</h3><p>Vous pouvez gagner du temps en discutant de votre projet de contribution avec les autres contributeurs :</p><ul><li><a href=https://github.com/DGEXSolutions/osrd/issues/new/choose><strong>Créez une issue</strong></a> pour avoir un endroit un discuter de votre contribution</li><li>Rejoignez le salon de messagerie instantanée matrix ! <strong>(très bientôt en place)</strong></li></ul><h3 id=se-renseigner>Se renseigner</h3><p>Comme dans tout projet, chaque changement se repose sur ce qui a été fait par le passé.
Avant d&rsquo;apporter un changement, renseignez-vous sur l&rsquo;existant :</p><ul><li>Vous pouvez <a href=https://dgexsolutions.github.io/osrd-website/fr/developers/>lire la documentation technique</a></li><li>Il est préférable de lire le code source de l&rsquo;application en rapport avec votre projet</li><li>Vous pouvez contacter les derniers développeurs à avoir travaillé sur les zones du code en rapport avec votre projet</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-f1426c0a8df88bfc815870310f05dc01>1.1 - Licence</h1><div class=lead>Droits et obligations</div><p>Tout le code du dépot OSRD est mis à disposition sous <a href=https://choosealicense.com/licenses/lgpl-3.0/>la licence LGPLv3</a>.</p><p>Comme pour tout autre projet open source, contribuer du code implique que son propriétaire consent à sa distribution sous la licence du projet.</p><div class="alert alert-warning" role=alert><p>La licence LGPL interdit de modifier OSRD sans publier le code source de l&rsquo;application modifiée: profitez du travail des autres, et laissez les autres profiter de votre travail !</p><p>Cette contrainte n&rsquo;est pas contagieuse à travers les API: Il est possible d&rsquo;utiliser OSRD comme bibliothèque, framework ou serveur pour s&rsquo;interfacer avec des composants propriétaires. N&rsquo;hésitez pas à proposer des changements pour répondre à vos besoins.</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-928afd58432c90ae89cd91b8c7b8c7ad>1.2 - Mise en place</h1><div class=lead>Apprendre à mettre en place un environnement de développement</div><div class="alert alert-info" role=alert>La plupart des développeurs OSRD utilisent Linux. Vous pouvez utiliser Windows ou MacOS, mais pourriez rencontrer quelques problèmes.</div><h2 id=obtenir-le-code-source>Obtenir le code source</h2><ul><li>Installer <a href=https://git-scm.com/><code>git</code></a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></li><li>Ouvrir un terminal<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> dans le dossier qui contiendra le code source d&rsquo;OSRD</li><li><code>git clone git@github.com:DGEXSolutions/osrd</code></li></ul><h2 id=lancer-lapplication-avec-docker-compose>Lancer l&rsquo;application avec docker-compose</h2><p>Pendant longtemps, même dans les cas où on ne développe que sur une partie des composants de l&rsquo;application à la fois, il était necessaire de compiler, configurer et lancer les différents composants de l&rsquo;application.</p><p>L&rsquo;outil <code>docker-compose</code>, sert à lancer les composants d&rsquo;OSRD.</p><ul><li>Installer <code>docker</code> et <code>docker-compose</code><sup id=fnref1:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></li><li>Lancer <code>docker-compose up --build</code></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Sous Linux, utilisez le gestionnaire de packet de votre distribution, comme par exemple <code>apt-get</code>.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a>&#160;<a href=#fnref1:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Sous Windows, ouvrez <code>Git Bash</code>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=td-content style=page-break-before:always><h1 id=pg-5743941a8788eded1c2c90838d3d552f>1.3 - Suivi des bugs</h1><div class=lead>Comment signaler un bug ou suggérer une amélioration</div><p><strong>N&rsquo;hésitez pas à signaler tout ce qui vous semble important !</strong></p><p>Notre outil de suivi des bugs est github. Il est nécessaire de s&rsquo;inscrire pour signaler un bug.</p><p>Suivez <a href=https://github.com/DGEXSolutions/osrd/issues/new/choose>ce lien</a> et choisissez le modèle qui correspond à votre cas de figure.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-bfeab1c04aedcd54c6ec9161ed206978>1.4 - Contribuer du code</h1><div class=lead>Apporter des modifications au code d&rsquo;OSRD</div><p>Ce chapitre décrit le processus aboutissant à l&rsquo;intégration de code au sein du projet. <strong>Si vous avez besoin d&rsquo;aide, ouvrez une issue ou envoyez un message instantané.</strong></p><ol><li><p>Si vous n&rsquo;être pas un habitué de Git, <a href=https://learngitbranching.js.org/>suivez ce tutoriel</a></p></li><li><p><strong>Créez une branche</strong><br>Si vous comptez contribuer régulièrement, vous pouvez demander accès au <a href=https://github.com/DGEXSolutions/osrd>dépot principal</a>. Sinon, <a href=https://github.com/DGEXSolutions/osrd/fork>créez un fork</a>.</p></li><li><p><strong>Ajoutez des changements sur votre branche</strong><br>Essayez de découper votre travail en étapes macroscopiques, et sauvegardez vos changements dans un commit à la fin de chaque étape. Essayez de suivre <a href=../conventions/>les conventions du projet</a>.</p></li><li><p><strong>Ouvrez une pull request</strong><br>Une fois que vos changements sont prêts, il est temps de proposer de les intégrer à la branche <code>dev</code>. Cela se fait <a href=https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request>dans l&rsquo;interface web de Github</a>.</p></li><li><p><strong>Prennez en compte les retours</strong><br>Une fois que votre pull request est ouverte, <a href=https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/about-pull-request-reviews>d&rsquo;autres contributeurs doivent donner leur avis sur votre proposition</a>:</p><ul><li>N&rsquo;importe qui peut donner son avis</li><li>Il est nécessaire d&rsquo;obtenir l&rsquo;approbation de <a href=https://github.com/DGEXSolutions/osrd/blob/dev/.github/CODEOWNERS>quelqu&rsquo;un familier avec le code</a> pour pouvoir intégrer le changement</li><li>Il est d&rsquo;usage de prendre en compte tous les commentaires critiques</li><li>Les commentaires sont souvent écrits dans un style plutôt direct, dans le soucis de collaborer efficacement vers une solution acceptable par tous.</li><li>Une fois que tous les commentaires ont été pris en compte, un mainteneur intègre le changement.</li></ul></li><li><p><strong>N&rsquo;hésitez pas à relancer vos interlocuteurs, plusieurs fois si besoin.</strong></p></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-3b1e58bad9e821c57de46582bee4ab5a>1.5 - Passer du code en revue</h1><div class=lead>Comment faire des retours constructifs</div><figure><a href=https://www.morling.dev/blog/the-code-review-pyramid/><img src=/osrd-website/fr/developers/contribute/reviewing-code/images/code_review_pyramid.svg></a></figure></div><div class=td-content style=page-break-before:always><h1 id=pg-9dd6bbcecc288c1a96bda2a504038594>1.6 - Conventions de style</h1><div class=lead>Conventions de style communes</div><p>Les conventions de style sont des règles d&rsquo;écriture qui permettent d&rsquo;uniformiser divers aspects du projet.</p><p>Elles sont relativement importantes, car elles permettent une meilleure compréhension entre développeurs, et donc une productivité accrue.</p></div><div class=td-content><h1 id=pg-f08850af3b1b9fa46814484d453e7de9>1.6.1 - Style des commits</h1><p>Le format général des commits est le suivant :</p><pre tabindex=0><code>composant: description du changement à l&#39;impératif

Description détaillée du contenu et de la motivation du changement,
si le titre n&#39;est pas complètement évident.
</code></pre><ul><li><strong>le message comme le code doit être en anglais</strong></li><li>tout en minuscule</li><li>il peut y avoir plusieurs composants, séparés par des <code>:</code> quand il y a une relation hiérarchique, ou des <code>,</code> sinon</li><li>dans l&rsquo;idéal, le corps du commit contient une description du changement.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-e3f26d5cf03ef3199fed6f928428f0ba>2 - Architecture</h1><div class=lead>Architecture logicielle de l&rsquo;application</div><p>Il s’agit d’une architecture multi-services où plusieurs composants logiciels interagissent entre eux. Ce choix a été fait pour assurer la modularité du code et pour garantir l’exploitabilité de certains services d’OSRD par des applications extérieures.</p><p><img src=../architecture.svg alt="Architecture du projet"></p></div><div class=td-content style=page-break-before:always><h1 id=pg-1f0bf572996bfd51989f5393e03203e8>3 - Modèle de données</h1><div class=lead>Décrit l&rsquo;organisation et le format des données dans OSRD</div><p>Décrit l&rsquo;organisation et le format des données dans OSRD.</p></div><div class=td-content><h1 id=pg-305403a703aa50dd850658f3c6e40df2>3.1 - Exemple d'utilisation</h1><div class=lead>Exemple d&rsquo;utilisation des formats de données d&rsquo;OSRD</div><font color=#aa026d><h3 id=introduction>Introduction</h3></font><p>Cette page donne un exemple de la manière dont les formats de données sont utilisés pour décrire une infrastructure dans <strong>OSRD</strong>.</p><p>À cette fin, prenons comme exemple l&rsquo;infrastructure-jouet suivante :</p><p><img src=../svg_diagrams/small_infra_diagram.drawio.svg alt="Diagramme de l&amp;rsquo;Infrastructure"></p><div class="alert alert-info" role=alert><h4 class=alert-heading>Conseil</h4>Pour zoomer sur un diagramme, cliquez sur le bouton d&rsquo;édition qui apparaît au survol de celui-ci.</div><p>Ce diagramme est un aperçu de l&rsquo;infrastructure avec les lignes et les stations uniquement.</p><p>Cette infrastructure ne se veut pas réaliste, mais plutôt destinée à illustrer le modèle de données de l&rsquo;OSRD.
Cet exemple sera créé étape par étape et expliqué en cours de route.</p><h4 id=le-générateur-dinfrastructures>Le générateur d&rsquo;infrastructures</h4><p>Dans le <a href=https://github.com/DGEXSolutions/osrd>dépôt <em>OSRD</em></a> se trouve une <a href=https://github.com/DGEXSolutions/osrd/tree/dev/core/examples/generated>bibliothèque python</a> conçue pour aider à générer des infrastructures dans un format compris par <em>OSRD</em>.</p><p>L&rsquo;infrastructure discutée dans cette section peut être générée grâce au fichier <a href=https://github.com/DGEXSolutions/osrd/blob/dev/core/examples/generated/scripts/small_infra.py>small_infra.py</a>. Pour en savoir plus sur les scripts de génération, vous pouvez consulter le <a href=https://github.com/DGEXSolutions/osrd/blob/dev/core/examples/generated/README.md>README</a> correspondant.</p><font color=#aa026d><h3 id=pistes>Pistes</h3></font><h4 id=sections-de-piste-track-sections>Sections de piste (Track Sections)</h4><p>Les premiers objets que nous devons définir sont les <code>TrackSections</code>. La plupart des autres objets sont positionnés par rapport aux sections de voie.</p><p>Une section de voie est une section de rail (sans les aiguillages). On peut choisir de diviser les voies de son infrastructure en autant de sections qu&rsquo;on le souhaite. Ici, nous avons choisi d&rsquo;utiliser les sections de voie les plus longues possibles, ce qui signifie qu&rsquo;entre deux aiguillages, il y a toujours une seule section de voie.</p><p>Les sections de voie sont ce sur quoi les trains simulés roulent. Ils sont l&rsquo;équivalent abstrait des sections de rails physiques. Les sections de voie sont bidirectionnelles.</p><p>Dans cet exemple, nous définissons deux voies pour la ligne entre les stations Ouest et Nord-Est. Nous avons également des voies de contournement aux stations Nord et Centre-Ouest pour plus de réalisme. Enfin, nous avons trois voies distinctes dans la station Ouest, puisqu&rsquo;il s&rsquo;agit d&rsquo;une plaque tournante majeure dans notre infrastructure imaginaire.</p><p><img src=../svg_diagrams/small_infra_rails.drawio.en.svg alt="Diagramme des sections de voies"></p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Important</h4><p>Les <code>TrackSections</code> sont représentées par des flèches dans ce diagramme pour souligner le fait qu&rsquo;elles ont un <strong>début</strong> et une <strong>fin</strong>. C&rsquo;est important car les objets positionnés sur les sections de voie sont localisés en fonction de leur distance par rapport au <strong>début</strong> de leur section de voie.</p><p>Par conséquent, pour placer un objet au début de sa section de piste, définissez son décalage à 0. Pour le déplacer à la fin de sa section de piste, définissez son décalage à la <code>length</code> de la section de piste.</p></div><p>Ces attributs sont nécessaires pour que la section de voie soit complète :</p><ul><li><code>length</code> : la longueur de la section de piste en mètres.</li><li><code>geo</code> : les coordonnées dans la vie réelle (geo pour géographique), au format <a href=https://en.wikipedia.org/wiki/GeoJSON>GeoJSON</a>.</li><li><code>sch</code> : les coordonnées dans la vue schématique (sch pour schematic), également au format <a href=https://en.wikipedia.org/wiki/GeoJSON>GeoJSON</a>.</li><li>attributs cosmétiques : <code>line_name</code>, <code>track_name</code>, <code>track_number</code> qui sont utilisés pour indiquer le nom et les étiquettes qui ont été donnés aux pistes / lignes dans la vie réelle.</li></ul><p>Pour toutes les sections de voies de notre infrastructure, les attributs <code>geo</code> et <code>sch</code> sont identiques, et ressemblent beaucoup au schéma donné.</p><p>Pour la plupart des sections de voies, leur &ldquo;longueur&rdquo; est proportionnelle à ce que l&rsquo;on peut voir sur le diagramme. Pour préserver la lisibilité, des exceptions ont été faites pour <em>TA6</em>, <em>TA7</em>, <em>TD0</em> et <em>TD1</em> (qui font 10km et 25km).</p><h4 id=liens-de-sections-de-voies>Liens de sections de voies</h4><p>Pour le moment, nous n&rsquo;avons créé que des sections de voies, qui ne sont pas connectées entre elles (les données géospatiales ne sont pas utilisées pour déduire quelles voies sont connectées).</p><p>Les <code>TrackSectionLinks</code> sont utilisés pour connecter deux sections de voie ensemble, tout comme un joint de soudure le ferait dans la vie réelle. Dans une simulation OSRD, un train ne peut passer d&rsquo;une section de voie à une autre que si elles sont reliées par un <code>TrackSectionLink</code> (ou par un <code>Switch</code>).</p><p>Pour connecter plus de deux <code>TrackSections</code> ensemble, utilisez les <a href=#aiguillages><code>Switches</code></a>.</p><p>Dans notre infrastructure, comme nous avons choisi d&rsquo;avoir des sections de voie aussi longues que possible, nous n&rsquo;avons pas besoin d&rsquo;utiliser les <code>TrackSectionLinks</code>.
Les <code>TrackSectionLinks</code> sont toujours optionnels : deux sections de voies reliées par un lien se comportent comme une seule section de voie.</p><h4 id=aiguillages>Aiguillages</h4><p>Un <code>Switch</code> représente ce à quoi vous vous attendez : des aiguillages ferroviaires.</p><p>Les aiguillages peuvent être vus comme une collection de liens de sections de voies, partitionnés en groupes. Chaque groupe représente un état de l&rsquo;aiguillage. L&rsquo;aiguillage d&rsquo;un groupe peut prendre du temps, et au maximum un lien peut être prêt à être utilisé à la fois.</p><p>Dans le monde réel, les aiguillages ne sont pas uniques, mais plutôt des instances de modèles existants.
Ainsi, les liens et les groupes ne font pas partie du switch lui-même, mais d&rsquo;un objet <code>SwitchType</code>, qui est partagé par les switches du même modèle.</p><h5 id=types-daiguilles>Types d&rsquo;aiguilles</h5><p>Les <code>SwitchTypes</code> ont deux attributs obligatoires :</p><ul><li><code>ports</code> : Une liste de noms de ports. Un port est un point d&rsquo;extrémité qui peut être connecté à une section de voie.</li><li><code>groups</code> : Une correspondance entre les noms de groupes et les listes de liens entre deux ports.</li></ul><p>A tout moment, toutes les aiguilles ont un groupe actif, et peuvent avoir un lien actif, qui appartient toujours au groupe actif. S&rsquo;il y a un lien actif, il est actif dans une direction donnée. Pendant une simulation, le changement de lien actif à l&rsquo;intérieur d&rsquo;un groupe est instantané, mais le changement de lien actif entre les groupes prend un temps configurable.
Ceci est dû au fait qu&rsquo;un switch est un objet physique, et que le changement de lien actif peut impliquer le déplacement de certaines de ses parties. Les <code>Groupes</code> sont conçus pour représenter les différentes positions qu&rsquo;un switch peut avoir. Chaque <code>groupe</code> contient les liens qui peuvent être utilisés dans la position du switch associé.</p><p>La durée nécessaire pour changer de groupe est stockée à l&rsquo;intérieur du <code>Switch</code>, car elle peut varier en fonction de l&rsquo;implémentation physique de l&rsquo;interrupteur.</p><p>Nos exemples utilisent actuellement trois types de switch. Les types d&rsquo;interrupteurs sont comme les autres objets, et peuvent facilement être ajoutés si nécessaire.</p><p><strong>1) L&rsquo;aiguillage</strong></p><p>L&rsquo;omniprésent aiguillage en Y, qui peut être considéré comme la fusion de deux voies ou la séparation d&rsquo;une voie.</p><p>Ce type d&rsquo;aiguillage possède trois ports : <em>base</em>, <em>gauche</em> et <em>droite</em>.</p><p><img src=../svg_diagrammes/point_switch.en.svg alt="Diagramme d&amp;rsquo;aiguillage"></p><p>Il y a deux groupes, chacun avec une connexion dans leur liste : <code>LEFT</code>, qui connecte <em>base</em> à <em>gauche</em>, et <code>RIGHT</code> qui connecte <em>base</em> à <em>droite</em>.</p><p>Ainsi, à tout moment, un train peut aller de la <em>base</em> à la <em>gauche</em> ou de la <em>base</em> à la <em>droite</em> mais jamais aux deux en même temps. Un train ne peut pas aller de <em>gauche</em> à <em>droite</em>.</p><p>Un aiguillage n&rsquo;a que deux positions :</p><p><img src=../svg_diagrams/point_switch_positions.en.svg alt="Diagramme des positions de l&amp;rsquo;aiguillage"></p><p><strong>2) L&rsquo;aiguillage de croisement</strong></p><p>Il s&rsquo;agit simplement de deux voies qui se croisent.</p><p>Ce type a quatre ports : <em>nord</em>, <em>sud</em>, <em>est</em> et <em>ouest</em>.</p><p><img src=../svg_diagrams/cross_switch.en.svg alt="Diagramme de l&amp;rsquo;aiguillage croisé"></p><p>Il ne comporte qu&rsquo;un seul groupe contenant deux connexions : <em>nord</em> vers <em>sud</em> et <em>ouest</em> vers <em>est</em>. En effet, ce type d&rsquo;interrupteur est <em>passif</em> : il n&rsquo;a pas de pièces mobiles. Bien qu&rsquo;il n&rsquo;ait qu&rsquo;un seul groupe, il est tout de même utilisé par la simulation pour faire respecter les réservations de route.</p><p>Voici les deux connexions différentes que ce type d&rsquo;interrupteur possède :</p><p><img src=../svg_diagrams/cross_switch_positions.en.svg alt="Diagramme des positions des aiguilles croisés"></p><p><strong>3) L&rsquo;interrupteur en croix double</strong></p><p>Celui-ci ressemble plus à deux interrupteurs à pointe dos à dos. Il possède quatre ports : <em>sud1</em>, <em>sud2</em>, <em>nord1</em> et <em>nord2</em>.</p><p><img src=../svg_diagrammes/double_cross_switch.en.svg alt="Diagramme d&amp;rsquo;un interrupteur à double croix"></p><p>Cependant, il comporte quatre groupes, chacun avec une connexion. Les quatre groupes sont représentés dans le diagramme suivant :</p><p><img src=../svg_diagrammes/double_cross_switch_positions.en.svg alt="Diagramme des positions de l&amp;rsquo;interrupteur croisé double"></p><h5 id=retour-aux-aiguilles>Retour aux aiguilles</h5><p>Un <code>Switch</code> possède trois attributs :</p><ul><li><code>switch_type</code> : l&rsquo;identifiant <a href=#types-daiguilles><code>SwitchType</code></a> de cette aiguille.</li><li><code>ports</code> : une correspondance entre les noms de port et les extrémités des sections de piste.</li><li><code>group_change_delay</code> : le temps qu&rsquo;il faut pour changer le groupe de l&rsquo;aiguillage qui est activé.</li></ul><p>Les noms des ports doivent correspondre aux ports du type d&rsquo;aiguillage choisi. Les extrémités de la section de voie peuvent être de début ou de fin, faites attention à choisir les bonnes.</p><p>La plupart des aiguillages de notre exemple sont des aiguillages réguliers. Le chemin de la gare du Nord à la gare du Sud a deux aiguillages de croisement, et il y a un double aiguillage de croisement juste avant que la ligne principale ne se divise en lignes Nord-Est et Sud-Est.</p><p><img src=../svg_diagrams/small_infra_rails_n_points.drawio.en.svg alt="Diagramme des sections de voie et des aiguillages"></p><h4 id=courbes-et-pentes>Courbes et pentes</h4><p>Les <code>Courbes</code> et les <code>Pentes</code> sont essentielles pour des simulations réalistes. Ces objets sont définis comme une plage entre un décalage de <code>début</code> et de <code>fin</code> d&rsquo;une section de voie. Si une courbe / pente s&rsquo;étend sur plus d&rsquo;une section de voie, elle doit être ajoutée à toutes les sections.</p><p>Les valeurs des courbes / pentes sont constantes sur toute leur étendue. Pour des courbes / pentes variables, il faut créer plusieurs objets.</p><p>Les valeurs de pente sont mesurées en <em>mètres par kilomètres</em>, et les valeurs de courbe sont mesurées en <em>mètres</em> (le rayon de la courbe).</p><div class="alert alert-primary" role=alert>N&rsquo;oubliez pas que la valeur de début doit toujours être inférieure à la valeur de fin. C&rsquo;est pourquoi les valeurs de courbe/pente peuvent être négatives : une pente ascendante de 1 allant du décalage 10 à 0 est identique à une pente descendante de -1 allant des décalages 0 à 10.</div><p>Dans le fichier <a href=https://github.com/DGEXSolutions/osrd/blob/dev/core/examples/generated/scripts/small_infra.py>small_infra.py</a>, nous avons des pentes sur les sections de piste <em>TA6</em>, <em>TA7</em>, <em>TD0</em> et <em>TD1</em>.</p><p>Il y a également des courbes sur les sections de voie <em>TE0</em>, <em>TE1</em>, <em>TE3</em> et <em>TF1</em>.</p><font color=#aa026d><h3 id=enclenchement>Enclenchement</h3></font><p>Jusqu&rsquo;à présent, tous les objets ont contribué à la topologie (forme) des voies. La topologie serait suffisante pour que les trains puissent naviguer sur le réseau, mais pas assez pour le faire en toute sécurité. pour assurer la sécurité, deux systèmes collaborent :</p><ul><li>L&rsquo;enclenchement garantit que les trains sont autorisés à avancer</li><li>La signalisation est le moyen par lequel l&rsquo;enclenchement communique avec le train</li></ul><h4 id=détecteurs>Détecteurs</h4><p>Ces objets sont utilisés pour créer des sections TVD (Track Vacancy Detection section) : la zone de la voie située entre les détecteurs est une section TVD. Lorsqu&rsquo;un train rencontre un détecteur, la section dans laquelle il entre est occupée. La seule fonction des sections TVD est de localiser les trains.</p><p>Dans la réalité, les détecteurs peuvent être des <a href=https://en.wikipedia.org/wiki/Axle_counter>compteurs d&rsquo;essieux</a> ou des <a href=https://en.wikipedia.org/wiki/Track_circuit>circuits de voie</a> par exemple.</p><p>Pour que cette méthode de localisation soit efficace, les détecteurs doivent être placés régulièrement le long de vos voies, pas trop nombreux pour des raisons de coût, mais pas trop peu, car les sections TVD seraient alors très grandes et les trains devraient être très éloignés les uns des autres pour être distingués, ce qui réduirait la capacité.</p><p>Il y a souvent des détecteurs à proximité de tous les côtés des aiguillages. De cette façon, l&rsquo;enclenchement est averti presque immédiatement lorsqu&rsquo;un aiguillage est libéré, qui est alors libre d&rsquo;être utilisé à nouveau.</p><div class="alert alert-info" role=alert>Prenons l&rsquo;exemple d&rsquo;un aiguillage de croisement : si le train A le franchit du <em>nord</em> au <em>sud</em> et que le train B vient le franchir de l&rsquo;<em>ouest</em> à l&rsquo;<em>est</em>, dès que le dernier wagon du train A a franchi l&rsquo;aiguillage, B devrait pouvoir partir, puisque A se trouve maintenant sur une section de voie complètement indépendante.</div><p>Dans <em>OSRD</em>, les détecteurs sont des objets ponctuels, donc tous les attributs dont ils ont besoin sont leur <code>id</code>, et la localisation de la voie (<code>track</code> et <code>offset</code>).</p><p><img src=../svg_diagrams/small_infra_detectors.drawio.en.svg alt="Diagramme infrarouge avec tous les détecteurs"></p><div class="alert alert-info" role=alert>Les carrés agglutinés représentent plusieurs détecteurs à la fois. En effet, certains tronçons de voie n&rsquo;étant pas représentés sur toute leur longueur, nous n&rsquo;avons pas pu représenter tous les détecteurs du tronçon de voie correspondant.</div><p>Quelques notes :</p><ul><li>Entre certains points, nous n&rsquo;avons ajouté qu&rsquo;un seul détecteur (et non pas deux), car ils étaient très proches les uns des autres, et cela n&rsquo;aurait eu aucun sens de créer un minuscule TVDS entre les deux. Cette situation s&rsquo;est produite sur des sections de voies (<em>TA3</em>, <em>TA4</em>, <em>TA5</em>, <em>TF0</em> et <em>TG3</em>).</li><li>Dans notre infrastructure, il y a relativement peu de sections de voie qui sont assez longues pour nécessiter plus de détecteurs que ceux liés aux aiguillages. A savoir, <em>TA6</em>, <em>TA7</em>, <em>TDO</em>, <em>TD1</em>, <em>TF1</em>, <em>TG1</em> et <em>TH1</em>. Par exemple, <em>TD0</em>, qui mesure 25 km, compte en fait 17 détecteurs au total.</li></ul><h4 id=arrêts-tampons>Arrêts tampons</h4><p>Les <code>BufferStops</code> sont des obstacles destinés à empêcher les trains de glisser dans des culs-de-sac.</p><p>Dans notre infrastructure, il y a un butoir sur chaque section de voie qui a un cul-de-sac. Il y a donc 8 butoirs au total.</p><p>Avec les détecteurs, ils définissent les limites des sections <a href="https://ressources.data.sncf.com/explore/dataset/lexique-des-acronymes-sncf/table/?sort=abreviation&q=TVD">TVD</a> (voir <a href=#d%C3%A9tecteurs>Detectors</a>).</p><h4 id=itinéraires>Itinéraires</h4><p>Une <code>Route</code> est un itinéraire dans l&rsquo;infrastructure. Un sillon est une séquence de routes. Les itinéraires sont utilisés pour réserver des sections de sillon avec l&rsquo;enclenchement. Voir la <a href=/fr/developers/internals/simulation-model/>documentation dédiée</a>.</p><p>Il est représenté avec les attributs suivants :</p><ul><li><code>entry_point</code> et <code>exit_point</code> : références de détecteurs ou de butées.</li><li><code>path</code> : La liste des plages de sections de voies qu&rsquo;un train peut emprunter pour aller de l&rsquo;entrée à la sortie. Il peut y avoir deux Routes avec les mêmes points d&rsquo;entrée et de sortie et deux chemins différents.</li><li><code>release_detectors</code> : Lorsqu&rsquo;un train franchit un détecteur de libération, les ressources réservées depuis le début de la route jusqu&rsquo;à ce détecteur sont libérées.</li></ul><font color=#aa026d><h3 id=signalisation>Signalisation</h3></font><p>Thanks to interlocking, trains are located and allowed to move. It&rsquo;s a good start, but meaningless until trains are made aware of it. C&rsquo;est là que les &ldquo;signaux&rdquo; entrent en jeu : les signaux réagissent aux enclenchements et peuvent être vus par les trains.</p><p>La façon dont les trains réagissent aux signaux dépend de l&rsquo;aspect, du type de signal et du système de signalisation.</p><p>Voici les attributs les plus importants des signaux :</p><ul><li><code>linked_detector</code> : Le [détecteur] lié (#détecteurs).</li><li><code>type_code</code> : Le type de signal.</li><li><code>direction</code> : La direction qu&rsquo;il protège, qui peut être simplement interprétée comme la façon dont il peut être vu par un train entrant (puisqu&rsquo;il n&rsquo;y a des feux que d&rsquo;un côté&mldr;). La direction est relative à l&rsquo;orientation de la section de voie.</li><li>Des attributs cosmétiques comme <code>angle_geo</code> and <code>side</code> qui contrôlent la manière dont les signaux sont affichés dans le front-end.</li></ul><p>Voici une visualisation de comment on peut représenter un signal, et quelle direction il protège.</p><p><img src=../svg_diagrams/signal_dir.en.svg alt="Exemple de signal de direction"></p><br><p>La manière dont les signaux sont disposés dépend fortement du système de signalisation et du gestionnaire de l&rsquo;infrastructure.</p><p>Voici les règles de base utilisées pour cet exemple d&rsquo;infrastructure :</p><ul><li>Nous ajoutons deux signaux d&rsquo;espacement (un par direction) pour chaque détecteur qui découpe une longue section de TVD en plus petites sections.</li><li>Les entrées d&rsquo;aiguillage où un train pourrait devoir s&rsquo;arrêter sont protégées par un signal (qui est situé à l&rsquo;extérieur de la section TVD de l&rsquo;aiguillage). Il doit être visible depuis la direction utilisée pour approcher l&rsquo;aiguillage. Lorsqu&rsquo;il y a plusieurs aiguillages dans une rangée, seul le premier a généralement besoin d&rsquo;être protégé, car l&rsquo;enclenchement est généralement conçu pour ne pas encourager les trains à s&rsquo;arrêter au milieu des intersections.</li></ul><p>Notez que les détecteurs liés à au moins un signal ne sont pas représentés, car il n&rsquo;y a pas de signaux sans détecteurs associés dans cet exemple.
Pour obtenir le <code>id</code> d&rsquo;un détecteur lié à un signal, prenez le <code>id</code> du signal et remplacez <em>S</em> par <em>D</em> (par exemple SA0 -> DA0).</p><p><img src=../svg_diagrams/small_infra_signals.drawio.en.svg alt="Diagramme infrarouge avec tous les signaux"></p><div class="alert alert-info" role=alert>Sur <em>TA6</em>, <em>TA7</em>, <em>TD0</em> et <em>TD1</em> nous n&rsquo;avons pas pu représenter tous les signaux car ces sections de voie sont très longues et comportent de nombreux détecteurs, donc de nombreux signaux.</div><font color=#aa026d><h2 id=divers>Divers</h2></font><h4 id=points-opérationnels>Points opérationnels</h4><p>Les <code>OperationalPoints</code> sont des collections de points (<code>OperationalPointParts</code>) d&rsquo;intérêt.</p><p>Par exemple, il peut être pratique de stocker l&rsquo;emplacement des plateformes en tant que parties et de les regrouper par station dans des points opérationnels.</p><p>Dans l&rsquo;exemple de l&rsquo;infrastructure, nous n&rsquo;avons utilisé que des points opérationnels pour représenter les stations. Les parties de points opérationnels sont représentées par des diamants violets. Gardez à l&rsquo;esprit qu&rsquo;un seul point opérationnel peut contenir plusieurs parties.</p><p><img src=../svg_diagrams/small_infra_op_points.drawio.en.svg alt="Exemples de points opérationnels"></p><h4 id=limites-de-gabarit-de-chargement>Limites de gabarit de chargement</h4><p>Ces objets s&rsquo;apparentent aux <code>Pentes</code> et aux <code>Courbes</code> : ils couvrent une plage de section de voie, avec un décalage de <code>début</code> et de <code>fin</code>. Il représente une restriction sur les trains qui peuvent circuler sur la plage donnée, par poids ou par type de train (fret ou passagers).</p><p>Nous n&rsquo;en avons pas mis dans nos exemples.</p><h4 id=sections-de-vitesse>Sections de vitesse</h4><p>Les <code>SpeedSections</code> représentent les limites de vitesse (en mètres par seconde) qui sont appliquées sur certaines parties des voies. Une <code>SpeedSection</code> peut s&rsquo;étendre sur plusieurs sections de voie, et ne couvre pas nécessairement la totalité des sections de voie. Les sections de vitesse peuvent se chevaucher.</p><p>Dans notre exemple d&rsquo;infrastructure, nous avons une section de vitesse couvrant l&rsquo;ensemble de l&rsquo;infrastructure, limitant la vitesse à 300 km/h. Sur une plus petite partie de l&rsquo;infrastructure, nous avons appliqué des sections de vitesse plus restrictives.</p><p><img src=../svg_diagrams/speed_sections.en.svg alt="Exemples de sections de vitesse"></p></div><div class=td-content style=page-break-before:always><h1 id=pg-1eea0849fd03cd6a3eed907d266e519e>3.2 - Liste des APIs</h1><div class=lead>APIs disponibles dans OSRD</div></div><div class=td-content><h1 id=pg-adb84c608bd0e376369f0ac7611c5ba0>3.2.1 - API</h1><div class=lead>Référence pour l&rsquo;API du service API</div><div id=ohpen_swagger_ui></div><script>window.onload=function(){const e=SwaggerUIBundle({url:"/openapi/api.yaml",dom_id:"#ohpen_swagger_ui",presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]});window.ui=e}</script></div><div class=td-content style=page-break-before:always><h1 id=pg-40ed16637b03918ce629413525d6f01b>3.2.2 - Chartos</h1><div class=lead>Référence pour l&rsquo;API du service Chartos</div><div id=ohpen_swagger_ui></div><script>window.onload=function(){const e=SwaggerUIBundle({url:"/openapi/chartos.yaml",dom_id:"#ohpen_swagger_ui",presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]});window.ui=e}</script></div><div class=td-content style=page-break-before:always><h1 id=pg-1fccf0195300e3099a26fceea3ec03ad>3.2.3 - Core</h1><div class=lead>Référence pour l&rsquo;API du service Core</div><div id=ohpen_swagger_ui></div><script>window.onload=function(){const e=SwaggerUIBundle({url:"/openapi/core.yaml",dom_id:"#ohpen_swagger_ui",presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]});window.ui=e}</script></div><div class=td-content style=page-break-before:always><h1 id=pg-34b2c8b304f10f76cfc5c78e32d7919a>3.2.4 - Editoast</h1><div class=lead>Référence pour l&rsquo;API du service Editoast</div><div id=ohpen_swagger_ui></div><script>window.onload=function(){const e=SwaggerUIBundle({url:"/openapi/editoast.yaml",dom_id:"#ohpen_swagger_ui",presets:[SwaggerUIBundle.presets.apis,SwaggerUIStandalonePreset]});window.ui=e}</script></div><div class=td-content style=page-break-before:always><h1 id=pg-c70048f8f396ac5c0d77d9983feb19e3>4 - Modèle de simulation de la signalisation et des aiguillages</h1><div class=lead>Décrit le fonctionnement du poste d&rsquo;aiguillage virtuel et de la signalisation</div><p>Le modèle de simulation définit le rôle et comportement des différents objets simulés au sein d&rsquo;OSRD.</p><p>Cette modélisation est un compromis entre de multiples enjeux:</p><ul><li>fidélité de la simulation</li><li>interprétabilité des résultats</li><li>adaptabilité du modèle à différentes technologies et usages, que cela soit en terme de signalisation, de poste d&rsquo;aiguillage, ou d&rsquo;usage des données</li></ul><p>En particulier, certaines subtilités propres aux systèmes pratiques ont été sacrifiées sur l&rsquo;autel de la compatibilité et de l&rsquo;interprétabilité:</p><ul><li>un signal doit forcément s&rsquo;addresser à un train en particulier: les signaux n&rsquo;ont pas d&rsquo;aspect par défaut; ils n&rsquo;existent que pour être vus</li><li>les itinéraires / routes sont formées à destination d&rsquo;un train en particulier</li></ul><div class="pageinfo pageinfo-info"><p>Ce document est une description du modèle de fonctionnement cible d&rsquo;OSRD.
Il a pour objectif de renseigner développeurs et experts métiers sur le fonctionnement du simulateur.
Des changements y sont apportés au fil de l&rsquo;évolution du projet.</p></div><div class="pageinfo pageinfo-warning"><p>Ce modèle est en cours d&rsquo;implémentation</p></div><h2 id=architecture>Architecture</h2><pre tabindex=0><code class=language-mermaid data-lang=mermaid>flowchart TD
    %%%% NODES

    train[Train]
    %% ↓
    signaling[Signalisation]
    %% ↓
    routing[Routage]
    ordering[Ordonnancement]
    spacing[&#34;Espacement&#34;]
    %% ↓
    reservation[Réservation]
    %% ↓
    location[Localisation]
    movable-elements[&#34;Éléments mobiles&#34;]

    %%%% EDGES

    train -- réagit à --&gt; signaling
    train -- réclame les itinéraires --&gt; ordering
    signaling -- observe --&gt; routing
    ordering -- réserve --&gt; routing
    signaling -- observe --&gt; spacing
    spacing -- observe --&gt; reservation
    spacing -- observe --&gt; movable-elements
    routing -- observe et réserve --&gt; reservation
    reservation -- observe --&gt; location
    reservation -- réserve et actionne --&gt; movable-elements
    train -- informe --&gt; location

    %%%% CLICKABLE LINKS

    click train href &#34;./train/&#34; _self
    click ordering href &#34;./ordering/&#34; _self
    click signaling href &#34;./signaling/&#34; _self
    click routing href &#34;./routing/&#34; _self
    click spacing href &#34;./spacing/&#34; _self
    click reservation href &#34;./reservation/&#34; _self
    click location href &#34;./location/&#34; _self
    click movable-elements href &#34;./movable-elements/&#34; _self
</code></pre><div class="alert alert-info" role=alert><h4 class=alert-heading>Pistes d'évolution</h4><ul><li>Gestion des overlaps</li></ul></div><h2 id=remerciements>Remerciements</h2><p>Par ordre alphabétique:</p><ul><li>Christophe Mémin</li><li>Nathanaël Dias</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-5e9f2a5678aaf506b5723f8f6e66b2bf>4.1 - Éléments mobiles</h1><div class=lead>Gère l&rsquo;état des organes de commande des aiguilles, passages à niveau, …</div><h2 id=description>Description</h2><p>Chaque élément mobile, aiguille ou passage à niveau, a une liste d&rsquo;états possibles.
Ces états sont mutuellement exclusifs.</p><h2 id=dépendances>Dépendances</h2><ul><li><code>statique</code> une liste d&rsquo;élements mobiles</li><li><code>statique</code> liste des états possibles de chaque élément mobile</li></ul><h2 id=opérations-possibles>Opérations possibles</h2><ul><li>observer un élément mobile</li><li>verrouiller / déverrouiller un élément mobile</li><li>bouger un élément mobile</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-b4b6c3c60bf3b7f2488afdb83fb94134>4.2 - Localisation</h1><div class=lead>Fournit les informations de position des trains sur le réseau</div><h2 id=description>Description</h2><p>La couche de localisation permet à d&rsquo;autres modules de simulation de suivre le déplacement du train dans l&rsquo;infrastructure.
L&rsquo;infrastructure ferroviaire est découpée en régions appelées zones. Quand on train entre dans une zone, ce module permet d&rsquo;en être notifié.</p><p>Les zones (ou TVDSection / DetectionSection) sont des partitions physiques des voies :</p><ul><li>capables de détecter la présence d&rsquo;un train</li></ul><h2 id=exigences-de-conception>Exigences de conception</h2><ul><li>il doit être possible de suivre les changements d&rsquo;occupation d&rsquo;une zone</li><li>il <em>devra</em> être possible de suivre les déplacements d&rsquo;un train</li><li>il <em>devra</em> être possible d&rsquo;implémenter un système de bloc mobile</li></ul><h2 id=dépendances>Dépendances</h2><ul><li><code>statique</code> une liste de zones</li></ul><h2 id=opérations>Opérations</h2><ul><li>Occuper une zone</li><li>Libérer une zone</li><li>Observer les changements d&rsquo;occupation d&rsquo;une zone</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-2e69058a60c3be16549d405b409b3391>4.3 - Reservation</h1><div class=lead>Gère l&rsquo;état de réservation des zones</div><div class="alert alert-warning" role=alert>Le mot réservation ici a pour sens réservation de la resource itinéraire, et non le sens commande plannifiée d&rsquo;itinéraire</div><h2 id=description>Description</h2><p>Les zones (ou TVDSection / DetectionSection) sont des partitions physiques des voies :</p><ul><li>capables de détecter la présence d&rsquo;un train</li><li>qui fournissent un service de réservation à l&rsquo;usage des routes</li></ul><p>Chaque zone a un certain nombre de configurations différentes.
Par exemple, une zone sans aiguille aura deux configurations :</p><ul><li>sens pair</li><li>sens impair</li></ul><p>Une zone avec une aiguille aura 4 configurations possibles :</p><ul><li>sens pair voie principale</li><li>sens impair voie principale</li><li>sens pair voie déviation</li><li>sens impair voie déviation</li></ul><p><strong>Chaque zone ne peut être réservée que pour une configuration donnée à la fois, mais peut être réservée simultanément par plusieurs routes</strong>.
Une zone ne peut changer de configuration que lorsqu&rsquo;elle n&rsquo;est pas réservée.</p><div class="alert alert-info" role=alert><p>En discutant avec des experts métiers, vont entendrez parler d&rsquo;<a href=https://fr.wikipedia.org/wiki/Enclenchement>enclenchements</a>:
le terme viens de l&rsquo;époque où les postes de signalisations étaient entièrement mécaniques.
Les enclenchements étaient alors des objets physiques qui empêchaient certaines configurations.</p><p>Une conséquence de cet héritage historique et que beaucoup de règles ferroviaires sont exprimées par contraintes au lieu d&rsquo;être exprimées par garanties.
Un enclenchement, c&rsquo;est une garantie qu&rsquo;une situation particulière ne peut pas se produire.</p></div><h3 id=état-dynamique-dune-zone>État dynamique d&rsquo;une zone</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>ZoneState</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>/// A list of active reservations.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>/// Each reservation requires a particular configuration to be upheld.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>reservations</span>: <span style=color:#000>VecDeque</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>ZoneReservation</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000>ZoneReservation</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>/// The train which requires this reservation
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>train</span>: <span style=color:#000>TrainHandle</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>// The configuration required for this reservation
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>requirements</span>: <span style=color:#000>ZoneRequirements</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>/// The state of this reservation
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>status</span>: <span style=color:#000>ZoneReservationStatus</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>ZoneReservationStatus</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>/// In the process of being reserved, but not yet ready
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>PRE_RESERVED</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>/// The train can arrive anytime
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>RESERVED</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>/// The train is inside the zone
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>OCCUPIED</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>/// The zone is pending release
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>PENDING_RELEASE</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000>ZoneRequirements</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>entry</span>: <span style=color:#204a87>Option</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>DirDetector</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>exit</span>: <span style=color:#204a87>Option</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>DirDetector</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>movable_elements</span>: <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>MovableElement</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>MovableElementConfig</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>impl</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ZoneState</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>/// Get the combined requirements for all the currently active reservations
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>fn</span> <span style=color:#000>get_combined_requirements</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span>-&gt; <span style=color:#204a87>Option</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>ZoneRequirements</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>return</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>reservations</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#000;font-weight:700>.</span><span style=color:#000>map</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>|</span><span style=color:#000>res</span><span style=color:#ce5c00;font-weight:700>|</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>requirements</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#000;font-weight:700>.</span><span style=color:#000>reduce</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>|</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>b</span><span style=color:#ce5c00;font-weight:700>|</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ZoneRequirements</span>::<span style=color:#000>combine</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>a</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>b</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><h2 id=exigences-de-conception>Exigences de conception</h2><ul><li>Les zones doivent pouvoir être <strong>verrouillées</strong> dans une configuration particulière.</li><li>Il doit être possible pour plusieurs routes de <strong>partager une réservation</strong> de configuration.</li><li>Il doit être possible d&rsquo;observer l&rsquo;<strong>évolution de statut d&rsquo;une réservation</strong>.</li><li>Il doit être possible de faire évoluer le statut d&rsquo;une réservation.</li></ul><h2 id=dépendances>Dépendances</h2><ul><li><code>statique</code> une liste de zones</li><li><code>dynamique</code> capacité d&rsquo;observer l&rsquo;occupation des zones</li><li><code>dynamique</code> capacité d&rsquo;actionner les éléments mobiles</li></ul><h2 id=opérations>Opérations</h2><ul><li><strong>espacement</strong>: Observer l&rsquo;état d&rsquo;une zone</li><li><strong>routage</strong>: Verrouiller et déverrouiller la zone. Toutes les opérations en écriture nécessitent d&rsquo;avoir acquis le verrou.</li><li><strong>routage</strong>: Pré-réserver une configuration de zone</li><li><strong>routage</strong>: Confirmer la réservation d&rsquo;une zone</li><li><strong>routage</strong>: Attendre que la réservation de la zone soit utilisée par son train</li><li><strong>routage</strong>: Relacher une réservation de zone</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-562c5c818f4dae853cf7acd8c99c81ca>4.4 - Routage</h1><div class=lead>Gère le cycle des routes</div><h2 id=description>Description</h2><ul><li>Les routes ont pour responsabilité d&rsquo;autoriser le déplacement des trains dans l&rsquo;infrastructure. Elles doivent se terminer à un point où l&rsquo;arrêt du train est prévu (en terme de signalisation, pas voyageur).</li><li>Les routes sont assimilables à des itinéraires, ou à des suites d&rsquo;itinéraires et d&rsquo;installations de pleine voie.</li><li>Les routes n&rsquo;ont pas de lien direct avec le cantonnement et la signalisation. Elles nourissent des informations sur la disponibilité des voies qui sont utilisées par le cantonnement et la signalisation.</li><li>Une route est un chemin de détecteur en détecteur. Elle représente une portion de chemin qu&rsquo;il est sûr pour un train d&rsquo;emprunter.</li><li>Les routes ont des points de libération, qui sont des détecteurs qui délimitent quand détruire l&rsquo;itinéraire, ce qui permet d&rsquo;implémenter transit souple, rigide, et entre-deux.</li><li>Une route peut être à nouveau formée alors qu&rsquo;un train est déjà en train de la parcourir. Cela permet à plusieurs trains de se suivre sur la même route.</li></ul><h3 id=cycle-de-vie-dune-route>Cycle de vie d&rsquo;une route</h3><p>Les routes n&rsquo;ont pas d&rsquo;état, mais leur commande donne lieu à une suite d&rsquo;événements systématique :</p><ul><li>le système commande toutes les routes sur le trajet du train dans l&rsquo;ordre, sans attendre<ul><li>la commande doit être acceptée par le <strong>régulateur</strong></li></ul></li><li>lorsque le régulateur accepte la commande, la <strong>formation</strong> commence<ul><li>le droit d&rsquo;action de chaque zone de la route est acquis, selon un ordre global</li><li>en parallèle pour toutes les zones:<ul><li>si la zone n’est pas dans la configuration souhaitée:<ul><li>si elle est déjà réservée, attendre que les réservations expirent</li><li>sinon, la mettre dans la configuration souhaitée en déplaçant les aiguilles</li></ul></li><li>pré-réserver la zone pour le passage du train</li><li>le droit d&rsquo;action de la zone est cédé</li></ul></li></ul></li><li>une fois que la formation est terminée, la route est <strong>établie</strong><ul><li>pour chaque zone, transformer la pré-réservation du train en réservation</li></ul></li><li>dès que la route est établie, un processus de <strong>destruction de la route</strong> commence<ul><li>pour chaque zone de la route donnant lieu à une libération<ul><li>attendre que le train quitte la zone (que la réservation passe de l&rsquo;état <code>OCCUPIED</code> à l&rsquo;état <code>PENDING_RELEASE</code>)</li><li>libérer la réservation des zones du début de la route jusqu&rsquo;à la zone actuelle</li></ul></li></ul></li></ul><div class="alert alert-info" role=alert><h4 class=alert-heading>Piste d'évolution</h4>Certains postes d&rsquo;aiguillages ont un enclenchement entre itinéraires de sens contraire (affrontement) qui empêche l&rsquo;activation d&rsquo;une route en menant à une zone avec un transit en sens contraire. Il serait envisageable de réserver une zone supplémentaire à la fin du chemin protégé par la route, par sécurité.</div><div class="alert alert-info" role=alert><h4 class=alert-heading>Piste d'évolution</h4>Certains itinéraires en gare ne permettent pas le partage du chemin par plusieurs trains</div><div class="alert alert-info" role=alert><h4 class=alert-heading>Piste d'évolution</h4>En pratique, il pourrait être intéressant d&rsquo;introduire une notion de route partielle afin de réduire le nombre de routes nécessaires: une route partielle est une portion de route qu&rsquo;il n&rsquo;est pas sûr d&rsquo;activer indépendament.</div><h2 id=exigences-de-conception>Exigences de conception</h2><p>Le système doit, indirectement ou directement:</p><ul><li>permettre à la <strong>signalisation</strong> de déterminer si une section de voie est <strong>prête à être empruntée</strong>.</li><li>permettre l&rsquo;<strong>ordonnancement</strong> des trains selon des critères configurables.</li><li>permettre la destruction progressive (<strong>transit souple</strong>) de l&rsquo;itinéraire après le passage du train.</li><li>il doit être possible d&rsquo;avoir plusieurs processus de commande actifs au même moment pour la même route, afin de supporter des trains qui se suivent</li></ul><h2 id=dépendances>Dépendances</h2><ul><li>une liste d&rsquo;élements mobiles</li><li>liste des états possibles de chaque élément mobile</li></ul><h2 id=opérations>Opérations</h2><ul><li><strong>commander une route</strong>: démarre un processus asynchrone qui ne se terminera que lorsque la route aura été établie. <strong>Un processus de destruction doit démarrer dès que la route est établie</strong>.</li></ul><h2 id=notes-de-conception>Notes de conception</h2><p>Ces notes permettent d&rsquo;expliquer les décisions qui ont été prises, afin de pouvoir plus aisément les comprendre et évoluer.</p><h3 id=informer-la-signalisation>Informer la signalisation</h3><p>Sachant que:</p><ul><li>il peut y avoir beaucoup de zones partant d&rsquo;un même point, il est préférable d&rsquo;éviter de contraindre les signaux à observer une liste de routes</li><li>il est potentiellement difficile d&rsquo;associer un état clair à chaque route</li></ul><p>Il en ressort plusieurs manières d&rsquo;informer la signalisation de la navigabilité des voies:</p><ul><li>soit <strong>directement</strong>, en faisant observer à la signalisation les points d&rsquo;entrée des routes. Si plusieurs routes partent du même endroit, elles partageraient un objet entrée:<ul><li>moins de complexité dans la couche de réservation, plus de complexité dans la couche de routage</li></ul></li><li>soit <strong>indirectement</strong>, via la couche de réservation des zones, qui auraient un état supplémentaire pour marquer leur navigabilité:<ul><li>moins de complexité dans la couche de routage, plus de complexité dans la couche de réservation</li><li><code>avantage</code> le processus d&rsquo;activation des routes n&rsquo;aurait pas besoin d&rsquo;attendre l&rsquo;arrivée du train, la couche de réservation s&rsquo;en occuperait.</li><li><code>avantage</code> découplage entre routage et cantonnement / signalisation.</li></ul></li></ul><p>La seconde option a été choisie, car:</p><ul><li>elle permet d&rsquo;avoir un couplage moins fort entre la signalisation et les routes.</li><li>elle évite aussi au processus d&rsquo;activation des routes d&rsquo;attendre le passage du train alors que la couche de réservation le fait déjà.</li></ul><h3 id=cycle-de-vie-des-routes-et-état-des-zones>Cycle de vie des routes et état des zones</h3><p>Plusieurs enjeux motivent le cycle de vie des routes et l&rsquo;état des zones :</p><ul><li>d&rsquo;une part, l&rsquo;état des zones est au coeur de la détection de conflit : il doit être possible d&rsquo;extraire d&rsquo;une simulation d&rsquo;un train seul ses besoins en ressources</li><li>d&rsquo;autre part, il faut qu&rsquo;une simulation multi-train fonctionne correctement : le temps de déplacement des aiguilles selon la configuration actuellement en place, en particulier, est un point de friction important</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-ffd3fd228f3e0f42d4dc6baaa1789002>4.5 - Espacement</h1><div class=lead>Gère l&rsquo;état des cantons</div><h2 id=couche-de-cantonnement>Couche de cantonnement</h2><p>Les cantons sont l&rsquo;équivalent des routes, mais pour la signalisation: les routes autorisent le déplacement du train, et les cantons, qui se superposent aux routes, permettent au train d&rsquo;être mis au courant de ses mouvements autorisés.</p><p>Les cantons ont plusieurs attributs:</p><ul><li>un <strong>chemin</strong>, qui représente les zones protégées par le canton, et leur état attendu (au même format que le chemin des routes)</li><li>un <strong>signal d&rsquo;entrée</strong>, optionnel (quand le canton pars d&rsquo;un butoir)</li><li>des <strong>signaux intermédiaires</strong> éventuels (c&rsquo;est utilisé avec des systèmes du style BAPR)</li><li>un <strong>signal de sortie</strong>, optionnel (quand le canton se termine à un butoir)</li></ul><p>Le chemin est exprimé de détecteur en détecteur afin de pouvoir faire un rapprochement avec le graphe des routes.</p><p>Quelques remarques:</p><ul><li>il peut y avoir plusieurs systèmes de signalisation superposés sur la même infrastructure. le modèle pars du principe qu&rsquo;un seul système à la fois est actif</li><li>un canton n&rsquo;a pas d&rsquo;état: on peut se reposer sur l&rsquo;état dynamique des zones qui le compose</li><li>les signaux utilisent les cantons pour savoir quelles zones sont à protéger à un instant donné</li></ul><h2 id=exigences-de-conception>Exigences de conception</h2><ul><li>chaque signal doit connaître le <strong>prochain signal compatible</strong></li><li>chaque signal doit connaître les <strong>zones qu&rsquo;il protège</strong></li><li><strong>compatibilité modules signalisation</strong> : les modules doivent créer les cantons entre chaque signaux. Chaque canton a un système de signalisation associé.</li><li><strong>compatibilité pathfinding</strong> : Le pathfinding se fait dans le produit du graphe de routage et du graphe de cantons.</li></ul><h2 id=dépendances>Dépendances</h2><ul><li><code>statique</code> les zones protégées par le canton, et leur configuration attendue (ce qui inclus l&rsquo;état des éléments mobiles)</li><li><code>statique</code> les signaux de début et de fin (optionnels)</li></ul><h2 id=opérations>Opérations</h2><ul><li><strong>signalisation</strong>: étant donné une direction sur un détecteur, quel est le canton actif, s&rsquo;il y en a un</li><li><strong>signalisation</strong>: quel est le signal suivant dans la chaîne</li><li><strong>signalisation</strong>: quelles sont les zones protégées par le signal</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-189391d0122ca17f60e2cede500d85bc>4.6 - Ordonnancement</h1><div class=lead>Décide de l&rsquo;ordre de formation des itinéraires</div><div class="alert alert-warning" role=alert>Cette page est une ébauche, contribuez-y!</div><h2 id=définition>Définition</h2><p>La couche d&rsquo;ordonnancement a pour responsabilité d&rsquo;établir l&rsquo;ordre de commande des itinéraires, et par conséquent, l&rsquo;ordre de passage des trains.
La méthode exacte utilisée pour prendre cette décision n&rsquo;importe pas, du moment qu&rsquo;elle garanti que la simulation se termine (elle ne doit pas amener de trains en nez-à-nez, ou créer d&rsquo;autre cas de figure de blocage).</p><p>Il est possible d&rsquo;implémenter un module d&rsquo;ordonnancement via des tableaux d&rsquo;ordre de succession des trains aux aiguilles.</p><h2 id=exigences-de-conception>Exigences de conception</h2><ul><li>Il doit être possible de connecter n&rsquo;importe quel algorithme d&rsquo;ordonnancement</li><li>Le module d&rsquo;ordonnancement doit approuver les commandes de routes.</li></ul><h2 id=opérations>Opérations</h2><ul><li><strong>train</strong>: Des itinéraires sont <strong>commandés</strong> pour chaque trains, aussi loin et aussi tôt que possible. L&rsquo;approbation de la commande est soumise au régulateur, qui peut la retarder indéfiniment, selon des critères de son choix.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-87317323fee49f1608c621194da98fb7>4.7 - Signalisation</h1><div class=lead>Gère l&rsquo;état des signaux</div><div class="alert alert-warning" role=alert>Cette page est une ébauche, contribuez-y!</div><h2 id=description>Description</h2><p>La couche de signalisation comprend l&rsquo;ensemble des signaux, qui réagissent au cantonnement et à la réservation.
Les signaux peuvent être de différent types, et sont chargés de manière modulaire. Seul importe leur comportement
vis-à-vis de l&rsquo;état de l&rsquo;infrastructure, et la réaction des trains à la signalisation.</p><h2 id=état>État</h2><p>Chaque système de signalisation a son type d&rsquo;état de signal.</p><p>Étant donné un type de signal, il doit être possible de :</p><ul><li>savoir s&rsquo;il est contraignant</li><li>déterminer une représentation graphique de ce signal</li><li><strong>TODO</strong>: il devra être possible de faire réagit un train à ce signal</li></ul><h2 id=dépendances>Dépendances</h2><ul><li>capacité d&rsquo;observer l&rsquo;état des routes, pour les signaux qui débutent une route</li><li>possibilité d&rsquo;observer l&rsquo;état des cantons devant le signal, de sélectionner le canton actif, et de réagir en fonction de l&rsquo;occupation du canton et du signal de fin de canton</li></ul><h2 id=opérations>Opérations</h2><ul><li><strong>observer le signal</strong></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-ad9fd21c42c169d0d20bb946cb8fec52>4.8 - Train</h1><div class=lead>Représente un train dans la simulation</div><h2 id=description>Description</h2><p>Les contraintes sur ce qu&rsquo;est un train sont relativement faibles.
Il doit seulement avoir un identifiant, qui permet aux autres systèmes de garder des références vers des trains.</p><h2 id=exigences-de-conception>Exigences de conception</h2><ul><li>Les trains <strong>occupent les zones</strong>.</li><li>Les trains doivent être <strong>suivis</strong> pour préserver leur <strong>ordre de passage</strong>.</li><li>Les trains ont pour responsabilité de <strong>demander les itinéraires</strong> devant eux.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-c4a9ceb2c86ff592a7ca0acf6b157983>5 - Détection de conflit</h1><div class="pageinfo pageinfo-warning"><p>Ce document n&rsquo;est pas finalisé</p></div><script type=application/javascript src=../mkt.js></script>
<object onload=mkt_hydrate(this.contentDocument.rootElement) type=image/svg+xml data=../space-time-diagram.svg></object><h2 id=introduction>Introduction</h2><p>Le système de détection de conflit doit permettre :</p><ul><li>étant donné deux simulations indépendantes, déterminer si elles peuvent être rejouées en même temps sans conflit</li><li>avoir des résultats interprétables, c&rsquo;est à dire que les conflits produits doivent pouvoir être reliés à un processus métier</li><li>avoir un fonctionnement interprétable, c&rsquo;est à dire qu&rsquo;il doit être possible de visualiser et interprêter le fonctionnement du système</li><li>passer à l&rsquo;échelle : étant donné un grand ensemble de trains et leur utilisation de ressources, il doit toujours être possible de détecter leurs conflits en un temps raisonnable</li><li>de permettre la recherche de chemin à travers les ressources utilisées par un grand nombre de trains</li><li>de modéliser les conflits d&rsquo;espacements transmits par des systèmes de signalisation à bloc fixe</li></ul><p>Un certain nombre de contraintes guident et ont guidé la conception du système de détection de conflit :</p><ul><li><strong>il ne doit pas pouvoir aboutir à la génération de faux-négatifs</strong>: s&rsquo;il ne détecte pas de conflits, une simulation multi-train de la même grille horaire ne doit pas présenter de ralentissements</li><li>le modèle ne doit pas se reposer sur des informations difficiles à obtenir étant donné l&rsquo;état actuel du projet</li><li>il ne doit pas exclure l&rsquo;inclusion ultérieure de bloc mobile</li><li>il doit être possible de détecter les conflits en simulant la signalisation tel que prévu dans le modèle de simulation</li><li>il doit être possible de détecter les conflits dans des zones à signalisation hétérogène, voire superposée</li></ul><h2 id=théorie-des-conflits>Théorie des conflits</h2><p>Ce modèle définit les règles de fonctionnnement du système de détection de conflit.</p><p>Il repose sur un système de réservation de ressources abstraites.
Ces ressources ont des configurations possibles, et peuvent être réservées pour un laps de temps donné.
Si des réservations requièrent une ressource au même moment, elle peuvent où non cohabiter selon leur type et paramètres.
Si deux réservations simultanées ne peux pas cohabiter, c&rsquo;est un conflit.</p><h3 id=définitions>Définitions</h3><h4 id=acteur>Acteur</h4><p>Un acteur est une entité susceptible de réserver des ressources</p><h4 id=ressource>Ressource</h4><p>Une ressource est un objet susceptible d&rsquo;être réservé et utilisé par différents acteurs.
Chaque ressource a des configurations, et ne peut être que dans une configuration à un instant donné.</p><h4 id=réservation>Réservation</h4><p>Une réservation est l&rsquo;expression par un acteur du besoin d&rsquo;utilisation d&rsquo;une ressource pour une période de temps donnée.</p><p>Ces réservations peuvent prendre plusieurs formes :</p><ul><li><strong>partagée</strong> : la ressource est réservée dans une configuration donnée, pendant le laps de temps donné. Ce type de réservation peut seulement cohabiter avec d&rsquo;autres réservations partagée de la même configuration.</li><li><strong>exclusive</strong> : la ressource est réversée dans une configuration donnée, pour un acteur particulier, pendant le laps de temps donné. Ce type de réservation peut seulement cohabiter avec d&rsquo;autres du même acteur et de la même configuration.</li></ul><h4 id=conflit>Conflit</h4><h5 id=conflits-de-réservation>Conflits de réservation</h5><p>Un conflit de réservation se produit lorsque qu&rsquo;il existe deux réservations simultanées dont les contraintes sont incompatibles.</p><p>Par exemple, il y a un conflit lorsque:</p><ul><li>une réservation exclusive chevauche n&rsquo;importe quelle autre réservation d&rsquo;un autre acteur</li><li>une réservation partagée chevauche une réservation d&rsquo;une autre configuration</li></ul><p>Il n&rsquo;y a toutefois pas de conflit lorsque:</p><ul><li>une ressource est réservée de manière exclusive sur des périodes qui n&rsquo;ont pas de moment commun</li><li>une ressource est partagée par des réservations qui ne requièrent pas la même configuration</li></ul><p>Un conflit de ressource perturbe l&rsquo;acteur à l&rsquo;origine des réservations.</p><h5 id=conflits-de-changement-de-configuration>Conflits de changement de configuration</h5><p>Certains conflits se produisent par manque de temps entre deux réservations consécutives.
Le temps requis entre deux réservations est spécifique à chaque ressource.</p><h2 id=application-au-modèle-de-détection-de-conflit>Application au modèle de détection de conflit</h2><p>Le système de détection de conflit peut être appliqué de différentes manières</p><h3 id=définitions-1>Définitions</h3><h4 id=acteur-1>Acteur</h4><p>On distingue les types d&rsquo;acteurs suivants :</p><ul><li>les <strong>trains</strong> (ou un poste d&rsquo;aiguillage / régulateur agissant au nom d&rsquo;un train)</li><li>les <strong>zones de travaux</strong></li></ul><h4 id=ressource-1>Ressource</h4><p>On distingue les ressources suivantes :</p><ul><li>les <strong>zones</strong>, qui ont autant de configurations qu&rsquo;il y a de manières de les traverser</li><li>les <strong>aiguilles</strong>, qui ont autant de configurations qu&rsquo;elles ont de position</li></ul><div class="pageinfo pageinfo-info"><p>À l&rsquo;avenir, les quais pourraient également être modélisés comme ressources, ce qui permettrait de générer des conflits en cas d&rsquo;embarquement ou débarquement simultané</p></div><h4 id=réservation-1>Réservation</h4><p>Une réservation, c&rsquo;est quelque chose qui enlève de la capacité.</p><h4 id=conflit-1>Conflit</h4><p>En pratique, un conflit de ressource gêne l&rsquo;acteur à l&rsquo;origine des réservations est un événement qui peut forcer un train à ralentir :</p><ul><li>un délai de formation d&rsquo;itinéraire dû à l&rsquo;indisponibilité de ressources</li><li>un conflit d&rsquo;espacement dû à un rattrapage</li></ul><p>Pour détecter les conflits, il est nécessaire de calculer l&rsquo;impact qu&rsquo;a un train sur la disponibilité des ressources: son empreinte.</p><h4 id=capacité>Capacité</h4><p>Le terme capacité désigne la capacité à réserver une ressource, ou plus largement la capacité de réservation d&rsquo;un ensemble de ressources nécessaires au passage d&rsquo;un train.</p><h2 id=génération-des-réservations>Génération des réservations</h2><p><strong>L&rsquo;enjeu principal est de générer des réservations qui, si elles sont satisfaites, garantissent au train simulé, suivant la signalisation simulée, un trajet sans ralentissement.</strong></p><h3 id=conflits-ditinéraire>Conflits d&rsquo;itinéraire</h3><p>L&rsquo;aiguillage d&rsquo;un train à travers l&rsquo;infrastructure a un impact susceptible de générer des conflits.
L&rsquo;empreinte d&rsquo;aiguillage, c&rsquo;est les réservations de ressources requises pour qu&rsquo;un train puisse être aiguillé sans gêne jusqu&rsquo;à sa destination.
Concrètement, ces ressources correspondent à des réservations de zones dans le temps.</p><p>Ces temps de réservation de ressources sont obtenus selon l&rsquo;algorithme suivant:</p><ul><li>un planning d&rsquo;établissement des ressources est établi de telle sorte à ce que le train n&rsquo;est jamais forcé de ralentir par une commande trop tardive des routes. Ce planning d&rsquo;établissement est déterminé en calculant les moments à partir duquel le conducteur verrait une signalisation contraignante, puis en soustrayant marge de temps (Khi, en jargon SNCF).</li><li>le planning d&rsquo;établissement des routes de tous les trains est utilisé pour déterminer la chronologie combinée de fin d&rsquo;utilisation des zones et des aiguilles</li><li>la chronologie combinée de fin d&rsquo;utilisation des zones est utilisée pour calculer les temps de formation des routes, puis un planning de commande des routes</li><li>le planning de commande des routes permet de connaître la chronologie de début d&rsquo;utilisation des zones, et donc connaître les réservations de zones pour chaque train</li></ul><p>On peut ensuite superposer les réservations de zones, et traduire en conflit les réservations incompatibles.</p><h3 id=conflits-despacement>Conflits d&rsquo;espacement</h3><p>En plus de pouvoir être ralentis par l&rsquo;établissement trop tardif de leurs routes, les trains peuvent être également être ralentis par la présence d&rsquo;un train plus loin sur leur chemin.
Tout comme les conflits de routes sont détectés en recoupant la chronologie de réservation des zones par les routes, les conflits d&rsquo;espacement sont détectés en recoupant les réservations implicites de zones pour l&rsquo;espacement.
Des zones sont réservées pour espacement lorsqu&rsquo;elles ne peuvent être occupées sous peine de ralentissement.
En fait, les zones réservées par un train peuvent être classifiées comme partageables, ou réservées pour espacement.</p><p>Les réservations implicites de zones sont calculées en simulant la signalisation comme suit:</p><ul><li>le planning de commande des routes est rejoué</li><li>on commence par partir du principe que toute les zones réservées pour l&rsquo;aiguillage le sont également pour espacement</li><li>à chaque fois que le conducteur voit un signal non-contraignant, la dernière zone actuellement réservée pour le train est occupée: si la signalisation ne contraint toujours pas le train, alors cette zone est marquée comme partageable à cet instant, et la zone précédente est testée. Si la signalisation contraint le train, on passe au signal suivant.</li><li>la chronologie de réservation de zone pour espacement est recoupée pour tous les trains, et comparée avec l&rsquo;occupation des zones. Chaque intersection génère un conflit.</li></ul><div class="pageinfo pageinfo-info"><p>Le système de réservation pour espacement a plusieurs avantages majeurs :</p><ul><li>il permet de simuler le partage de l&rsquo;infrastructure par des trains qui utilisent des systèmes de signalisation différents</li><li>il peut être étendu aux blocs mobiles: au lieu de réserver des zones devant le train, on réserve une distance</li></ul></div></div><div class=td-content style=page-break-before:always><h1 id=pg-b1785ebc56cebd1887c276b5797e2fec>6 - Gestion des versions</h1><div class=lead>Gestion des versions de l&rsquo;infrastructure</div></div><div class=td-content style=page-break-before:always><h1 id=pg-a7afec2a6360299976014319fa6425cc>7 - Wiki Ferroviaire</h1><div class=lead>Wiki ferroviaire international</div><p>Ce wiki a pour objectif de rendre accessible aux développeurs des informations sur le monde ferroviaire.</p><p><strong>Cela ne peut se produire que si le contenu est ajouté lorsque nécessaire. Si quelque chose manque, contribuez !</strong></p></div><div class=td-content><h1 id=pg-017d696c044a7d5a1a401bd7e5245ea1>7.1 - Glossaire</h1><div class=lead>Glossaire thématique d&rsquo;OSRD et du ferroviaire</div><p>À compléter : ouvrez une issue en cas de mot manquant</p><h3 id=a>A</h3><ul><li><strong>ADV</strong> : Appareil de voie</li></ul><h3 id=b>B</h3><ul><li><strong>BA</strong> : Block automatique</li><li><strong>BAL</strong> : Block automatique lumineux</li><li><strong>BAPR</strong> : Block automatique à permissivité restreinte</li><li><strong>BM</strong> : Block manuel</li><li><strong>BMCV</strong> : BM par circuit de voie</li><li><strong>BMVU</strong> : BM de voie unique</li></ul><h3 id=c>C</h3><ul><li><strong>CAPI</strong> : Cantonnement assisté par informatique</li><li><strong>CC</strong> : Commande et contrôle</li><li><strong>COVIT</strong> : Contrôle de vitesse</li><li><strong>CT</strong> : Cantonnement téléphonique</li></ul><h3 id=d>D</h3><ul><li><strong>DAAT</strong> : Dispositif d’arrêt automatique des trains</li><li><strong>DMI</strong> : Driver machine interface : dispositif qui permet la communication entre le système bord et le conducteur</li><li><strong>DV</strong> : Double voie</li></ul><h3 id=e>E</h3><ul><li><strong>EOA</strong> : End of authority (fin d’autorisation de mouvement)</li><li><strong>EPSF</strong> : Établissement public de sécurité ferroviaire</li><li><strong>ETCS</strong> : European train control system (système européen de contrôle commande des trains)</li><li><strong>ERTMS</strong> : European rail traffic management system (système européen de gestion du trafic ferroviaire)</li><li><strong>EVC</strong> : European vital computer. (ordinateur européen de sécurité) : calculateur de bord qui supervise la marche du train en fonction des données sol et bord</li></ul><h3 id=f>F</h3><ul><li><strong>FA</strong> : Fermeture automatique</li><li><strong>FS</strong> : Full supervision (supervision complète) : mode technique dans lequel le train est supervisé en vitesse et déplacement = marche normale attribuée au train</li></ul><h3 id=g>G</h3><ul><li><strong>GI</strong> : Gestionnaire d’infrastructure</li><li><strong>GSM/GFU</strong> : Global system for mobile communication/Groupe fermé d’utilisateurs</li><li><strong>GSM-R</strong> : Global system for mobile communication railways (Système de communication téléphonique pour mobile dédié aux chemins de fer)</li><li><strong>GSM-R Data</strong> : Système de transmission de données entre les installations « sol » et les installations « bord » via le réseau GSM-R</li></ul><h3 id=i>I</h3><ul><li><strong>ICS</strong> : Installations de circulation à contre-sens</li><li><strong>IPCS</strong> : Installations permanentes de contre-sens</li><li><strong>IS</strong> : Installation de sécurité</li><li><strong>ITCS</strong> : Installations temporaires de contre-sens</li></ul><h3 id=j>J</h3><ul><li><strong>JRU</strong> : Juridical recording unit (Enregistreur des paramètres d’exploitation)</li></ul><h3 id=k>K</h3><ul><li><strong>KVB</strong> : Contrôle de vitesse par balises</li></ul><h3 id=l>L</h3><ul><li><strong>LEU</strong> : Line side electronic unit (codeur ERTMS)</li><li><strong>LGV</strong> : Ligne à grande vitesse</li></ul><h3 id=m>M</h3><ul><li><strong>MA</strong> : Movement authority : autorisation donnée à un train de circuler vers un point donné en tant que mouvement supervisé</li></ul><h3 id=n>N</h3><ul><li><strong>Nf</strong> : Non franchissable</li><li><strong>NL</strong> : Non leading (non en tête) : Mode technique de circulation utilisé pour la double traction ou la pousse</li></ul><h3 id=o>O</h3><ul><li><strong>OS</strong> : On sight (conduite à vue) : mode technique de circulation qui autorise le conducteur à s’avancer en marche à vue. En ETCS1, le mode OS accompagné du message textuel national « Voie de service » impose la marche en manoeuvre pour la réception sur voie de service</li></ul><h3 id=p>P</h3><ul><li><strong>PI ETCS</strong> : Point d’information ETCS : constitué d’une ou plusieurs balises transmettant des informations vers le bord (par exemple PI avancé ou PI signal)</li><li><strong>PL</strong> : Pleine ligne</li><li><strong>PLD</strong> : Point limite de domaine : point où une transition entre ETCS et un autre système de signalisation a lieu</li><li><strong>PN</strong> : Passage à niveau</li></ul><h3 id=r>R</h3><ul><li><strong>RBC</strong> : Radio block center : système centralisé fonctionnant avec les enclenchements afin d’établir et de contrôler l’espacement et le mouvement des trains en envoyant et recevant des informations par radio en ETCS2 ou 3</li><li><strong>RFN</strong> : Réseau Ferré National</li><li><strong>RST</strong> : Radio sol-train</li><li><strong>RT</strong> : Renseignement technique</li><li><strong>RV</strong> : Reversing (refoulement) : mode technique de circulation utilisé pour permettre au train de reculer d&rsquo;urgence sans signaux ni ordre dans une zone prédéfinie. Ce mode n&rsquo;est pas utilisé sur le RFN</li></ul><h3 id=s>S</h3><ul><li><strong>SGS</strong> : Système de gestion de la sécurité</li><li><strong>SH</strong> : Shunting (manoeuvre) : mode technique de circulation manoeuvre</li><li><strong>SN</strong> : System national : mode technique de circulation de niveau STM</li><li><strong>SR</strong> : Staff responsible (responsabilité agent) : mode technique de circulation utilisé dans les situations dégradées. Il est utilisable sous la responsabilité respective de l’agent-circulation et du conducteur</li><li><strong>STM</strong> : Specific transmission module (Module spécifique de transmission) : ce dispositif permet à l’ETCS d’utiliser un système de signalisation national</li></ul><h3 id=t>T</h3><ul><li><strong>TECS</strong> : Tableau lumineux d’entrée à contre sens</li><li><strong>TIV</strong> : Tableau indicateur de vitesse</li><li><strong>TR</strong> : Trip : mode technique de circulation entraînant une application irréversible du freinage d’urgence par le système ETCS jusqu’à l’arrêt du train</li><li><strong>TSCS</strong> : Tableau lumineux de sortie à contre sens</li><li><strong>TVM</strong> : Transmission voie machine</li></ul><h3 id=v>V</h3><ul><li><strong>VB</strong> : Voie banalisée</li><li><strong>VP</strong> : Voie principale</li><li><strong>VS</strong> : Voie de service</li><li><strong>VU</strong> : Voie unique</li><li><strong>VUT</strong> : Voie unique temporaire</li><li><strong>VUTP</strong> : Voie unique temporaire à caractère permanent</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-069dee5d3979633c876226a775237408>7.2 - Signalisation</h1><div class=lead>Les signaux, régimes d&rsquo;exploitation des trains, et les systèmes d&rsquo;espacement des trains</div><p>Cette section est destinée à exposer les principes généraux relatifs :</p><ul><li>aux signaux</li><li>aux régimes d’exploitation des lignes (à venir)</li><li>aux différents systèmes d’espacement des trains</li></ul><p><img src=images/document-pedagogique-signaux-regimes-exploitation-v1/image-001.png alt></p><p>La grande majorité des informations de cette section sont extraites du <strong><em><a href=./docs/document-pedagogique-signaux-regimes-exploitation-v1.pdf>document pédagogique de l&rsquo;Établissement Public de
Sécurité Ferroviaire (EPSF)</a></em></strong> édité le 05 juillet 2017.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-888e3078052fd69049907ba0a120d674>7.2.1 - Les signaux</h1><h3 id=principe>Principe</h3><p>Pour transmettre au conducteur des ordres et informations liées à la sécurité des circulations, il est fait usage de
signaux. Ces signaux peuvent indiquer des informations relatives aux limites de vitesse, peuvent servir à garantir
l&rsquo;espacement des trains ou donner des indications diverses telles que l&rsquo;accès à des voies de service, des ouvrages
d&rsquo;art à gabarits réduit, etc.</p><h3 id=la-signalisation-à-main>La signalisation à main</h3><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-009.png alt></p><h3 id=la-signalisation-au-sol>La signalisation au sol</h3><p>La signalisation au sol est normalement implantée à gauche ou au-dessus de la voie concernée.</p><h4 id=signaux-de-protection>Signaux de protection</h4><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-010.png alt></p><p>Les signaux de protection sont destinés à interdire l’accès à un itinéraire, à une aiguille, à un PN, etc. Ils sont
généralement manœuvrés depuis des postes par des agents de SNCF Réseau.</p><h4 id=signaux-de-cantonnement>Signaux de cantonnement</h4><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-011.png alt></p><p>Les signaux de cantonnement sont destinés à assurer l’espacement des circulations de même sens.</p><p>Sur les sections de lignes équipées en <a href=../spacing/automatic_block_systems/>block automatique (BA)</a>, les signaux de
cantonnement <strong>se ferment automatiquement</strong> dès l’occupation du canton et restent fermés jusqu’à sa complète libération.</p><p>Sur les sections de lignes équipées en block manuel (BM), les signaux de cantonnement sont <strong>manœuvrés depuis des postes
par des agents du service du GI chargé de la gestion des circulations</strong>.</p><h4 id=signaux-dannonce-darrêt>Signaux d’annonce d’arrêt</h4><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-012.png alt></p><p>Le carré, le sémaphore et le feu rouge clignotant sont normalement <strong>annoncés à distance</strong> par un <strong>avertissement</strong> qui
peut lui-même être précédé, en signalisation lumineuse, par un feu jaune clignotant.</p><p>Toutefois, les signaux qui ne peuvent être abordés qu’en marche à vue ou en marche en manœuvre ne sont normalement pas
annoncés (par exemple, le guidon d’arrêt). Il en est de même des signaux situés sur voie principale à la sortie des
gares en impasse.</p><h4 id=signaux-dindication-de-marche>Signaux d’indication de marche</h4><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-013.png alt></p><p>Le feu vert indique au conducteur que la circulation en marche normale est autorisée, s’y rien ne s’y oppose.</p><p>Sur les sections de ligne où la vitesse des trains est supérieure à 160 km/h, un <strong>feu vert clignotant</strong> précède
généralement l’avertissement ou le feu jaune clignotant.</p><h4 id=signaux-de-limitation-de-vitesse>Signaux de limitation de vitesse</h4><p>Ils limitent à un taux déterminé la vitesse des trains sur une partie de voie ou au franchissement de certains points
particuliers (aiguille, traversée de gare, etc.).</p><h5 id=les-limitations-permanentes-de-vitesse-en-complément-de-celles-pouvant-figurer-dans-les-rt>Les limitations permanentes de vitesse (en complément de celles pouvant figurer dans les RT)</h5><ul><li>Sur des parties de voie par tableau indicateur de vitesse (TIV) ordinaire</li></ul><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-014.png alt></p><ul><li><p>Au franchissement de certains points particuliers (exemple des aiguilles)</p><ul><li>Ralentissement à 30 km/h en signalisation lumineuse</li></ul><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-015.png alt></p><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-034.png alt></p><ul><li>Ralentissement à 60 km/h en signalisation lumineuse</li></ul><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-016.png alt></p><ul><li>TIV mobiles</li></ul><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-017.png alt>
Ces tableaux peuvent être lumineux ou mécaniques ; lorsqu’ils sont ouverts ils présentent une bande verticale blanche continue.</p><p>Si cela est nécessaire, l’emplacement de l’aiguille (ou de la première aiguille dans le cas d’aiguilles successives) est repéré par un chevron pointe en bas.</p><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-039.png alt></p><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-042.png alt></p></li></ul><h5 id=les-limitations-temporaires-de-vitesse>Les limitations temporaires de vitesse</h5><p>Cette signalisation s’applique sur des parties de voie (chantiers de travaux, etc.) sur lesquelles une limitation
temporaire de vitesse doit être observée.</p><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-045.png alt></p><h4 id=signaux-indicateurs-de-direction>Signaux indicateurs de direction</h4><p>Ils renseignent les conducteurs sur la direction géographique qui leur est donnée.</p><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-049.png alt></p><h4 id=signaux-caractéristiques-de-prescriptions-particulières>Signaux caractéristiques de prescriptions particulières</h4><p>Ils renseignent les conducteurs sur des particularités.</p><p>On trouve :</p><ul><li>des tableaux</li><li>des pancartes</li><li>la bande lumineuse jaune</li><li>la croix de Saint-André (annulation des signaux)</li></ul><h5 id=exemples-de-tableaux>Exemples de tableaux</h5><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-018.png alt></p><h5 id=exemples-de-pancartes>Exemples de pancartes</h5><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-019.png alt></p><h5 id=bande-lumineuse-jaune-horizontale>Bande lumineuse jaune horizontale</h5><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-021.png alt></p><p>La bande lumineuse jaune horizontale est utilisée en complément de l&rsquo;avertissement. Elle indique au conducteur que son
train est dirigé vers une voie à quai de courte longueur ou bien que sa longueur se trouve réduite.</p><h5 id=croix-de-saint-andré-annulation-des-signaux>Croix de Saint-André (annulation des signaux)</h5><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-022.png alt></p><h4 id=signalisation-de-sortie-de-certains-faisceaux-ou-groupes-de-voies-convergentes>Signalisation de sortie de certains faisceaux ou groupes de voies convergentes</h4><p>Elle peut être constituée de :</p><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-020.png alt></p><h3 id=la-signalisation-de-cabine>La signalisation de cabine</h3><p>Sur les lignes à signalisation de cabine, le système transmet de manière continue (ou discontinue) en cabine de conduite
des ordres et une consigne de vitesse associée éventuellement à une distance but.
La signalisation de cabine peut être complétée par une signalisation au sol dans certains cas pour :</p><ul><li><strong>repérer</strong> les points à ne pas dépasser, par exemple :</li></ul><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-072.png alt></p><ul><li><strong>donner</strong> des ordres de traction électrique, des informations aux points d&rsquo;entrée et de sortie du domaine de
signalisation de cabine, etc.</li></ul><p>Des pancartes ou tableaux indiquent ces ordres et informations.</p><p>Ces repères, pancartes ou tableaux sont implantés :</p><ul><li>à gauche de la voie sur les plateformes à une seule voie ;</li><li>côté piste, à l&rsquo;extérieur sur les plateformes à deux voies ;</li><li>dans le cas de plan de voie plus complexe, les pancartes ou tableaux sont fléchés.</li></ul><p>Nota : les repères ETCS et de la TVM ne sont pas fléchés du fait de leur graphisme indiquant la voie à laquelle ils s&rsquo;adressent.</p><h3 id=point-de-transition-de-signalisation-entrée-sur-lgv-armement-de-la-signalisation-de-cabine>Point de transition de signalisation (entrée sur LGV, armement de la signalisation de cabine)</h3><p>Le point de transition de signalisation (tableau CAB), ainsi que l&rsquo;armement de la signalisation de cabine, se situent à
hauteur ou immédiatement en aval du dernier signal au sol (signal carré).</p></div><div class=td-content style=page-break-before:always><h1 id=pg-60055148750cd5a6034dce390a86fa96>7.2.2 - Les systèmes d'espacement des trains</h1><h3 id=définition>Définition</h3><p>Le système d’espacement des trains de même sens, est destiné à éviter les rattrapages et consiste à fractionner la ligne
en plusieurs cantons dont l’entrée est protégée par un signal d’arrêt.</p><h3 id=principe>Principe</h3><p>Compte tenu de leur masse importante, de leur vitesse élevée, de la faible adhérence rail-roue, les trains ont besoin
d’une distance importante pour s’arrêter.</p><p>De ce fait, la distance nécessaire pour obtenir l’arrêt est généralement plus grande que la partie de voie visible par
le conducteur. Dans ces conditions, le conducteur d’un train en marche ne voyant pas à temps la queue d’un train arrêté
ou circulant à plus faible vitesse devant lui risquerait de le heurter.</p><p><img src=../images/document-pedagogique-signaux-regimes-exploitation-v1/image-078.png alt></p><p>Pour prévenir le risque de rattrapage : un dispositif d’espacement des trains appelé « cantonnement » est mis en place
selon les principes suivants :</p><ul><li>la ligne est divisée en portions de voie appelées « cantons »</li><li>l’entrée de chaque canton est normalement commandée par un signal</li><li>un seul train est normalement admis dans chaque canton</li><li>aucun train ne peut normalement pénétrer dans un canton occupé, du fait du maintien à la fermeture du signal d’entrée
du canton durant tout le temps de son occupation</li></ul><p>Dans certains cas particuliers, la pénétration d’un train dans un canton occupé ainsi que les modalités de
franchissement du signal d’entrée du canton sont prévues dans une procédure propre à chaque mode de cantonnement.</p><h4 id=les-différents-modes-de-cantonnement>Les différents modes de cantonnement</h4><p>On distingue :</p><ul><li>le cantonnement téléphonique</li><li>le block manuel par appareils (BM)</li><li><a href=./automatic_block_systems/>le block automatique</a> : lumineux (BAL) ou à permissivité restreinte (BAPR)</li><li>l’ETCS 1 généralement superposé à la signalisation au sol</li><li>l’espacement sur lignes à grande vitesse (TVM, <a href=./ertms/>ETCS 2</a>)</li></ul><p>Sur les sections de lignes équipées en cantonnement téléphonique ou en block manuel par appareils, les signaux de
cantonnement sont manoeuvrés au sol ou depuis des postes par des agents du service du gestionnaire d’infrastructure (GI)
chargé de la gestion des circulations dénommés « gardes ».</p><p>Sur les sections de lignes équipées en BAL ou BAPR, les signaux de cantonnement se ferment automatiquement dès
l’occupation du canton et restent fermés jusqu’à sa complète libération.</p><p>Sur les sections de lignes à signalisation de cabine, équipées en TVM ou ETCS, les informations liées à l’espacement des
trains sont données au conducteur automatiquement directement en cabine de conduite.</p><p>Pour déterminer le mode et le cas échéant les postes de cantonnement d’une section de ligne, il faut consulter les RT.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-020d1a5c76f0a597d16cdd5eb7880bb9>7.2.2.1 - BA</h1><div class=lead>Block Automatique</div><h3 id=principe>Principe</h3><p>Le block automatique se caractérise en block automatique lumineux (BAL) et en block automatique à permissivité restreinte (BAPR) par :</p><ul><li>le fonctionnement entièrement automatique des signaux de cantonnement dont le changement d’état (fermeture ou ouverture) est provoqué par le passage des circulations sans aucune intervention humaine ;</li><li>l’état d’occupation de chaque canton, agissant directement sur le signal d’entrée correspondant est obtenu par le circuit de voie en BAL, généralement par un comptage d’essieu en BAPR.
Le BAL permet un débit élevé des circulations sur la ligne.</li></ul><h3 id=fonctionnement-dun-circuit-de-voie>Fonctionnement d&rsquo;un circuit de voie</h3><p>Un circuit de voie est principalement constitué de trois éléments :</p><ul><li>un émetteur, branché à l’une des extrémités de la zone. Il délivre un courant qui peut être de différente nature selon les types de circuit de voie (continu, impulsionnel, alternatif, etc.) ;</li><li>une ligne de transmission, constituée par les deux files de rails ;</li><li>un récepteur, branché à l’autre extrémité de la zone. Il assure le filtrage, l’amplification et la transformation du signal reçu via les rails, ce qui agit sur un relais appelé relais de voie. Les contacts de ce relais sont utilisés pour établir ou couper le circuit électrique du signal d’entrée du canton.</li></ul><p>Lorsqu’aucun véhicule n’est présent sur la zone délimitant le circuit de voie (voie libre), le signal délivré par l’émetteur parvient au récepteur à travers la ligne de transmission, et le relais de voie est excité. Le feu d’entrée du canton est à voie libre (cas 1 ci-dessous).</p><p>Lorsqu’un véhicule est présent, son premier essieu agit comme une faible résistance, appelée shunt, qui court-circuite la transmission. Dans ce cas, le niveau du signal parvenant au récepteur n’est plus suffisant et le relais de voie se désexcite, ce qui entraine la fermeture du signal d’entrée du canton (cas 2 ci-dessous).</p><p><img src=../../images/document-pedagogique-signaux-regimes-exploitation-v1/image-079.png alt></p><h3 id=fonctionnement-des-compteurs-dessieux>Fonctionnement des compteurs d&rsquo;essieux</h3><p>Un compteur d’essieux est un dispositif technique servant à détecter la présence d’une circulation sur une section, par
comptage des essieux qui franchissent les détecteurs encadrant cette section.</p><p>Un point de détection est installé à chaque extrémité de la section, et chaque fois qu’un essieu passe sur ce point au
début de la section, un compteur s’incrémente. Quand le train passe sur le point de détection en fin de la section, le
compteur décrémente. Si le nombre final est zéro, la section est présumée libre pour un deuxième train et le signal
d’entrée du canton présentera l’indication « voie libre ».</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f60098d1f79dc88e28a465556617dcdc>7.2.2.1.1 - BAL</h1><div class=lead>Block Automatique Lumineux</div><p>Le signal d’entrée du canton présente une indication liée à l’état d’occupation du ou des cantons suivants, selon les
règles suivantes :</p><ul><li>indication d’arrêt lorsque le canton est occupé par au moins une portion du train</li><li>annonce lorsque le canton suivant est occupé</li><li>voie libre par défaut (sauf signaux Nf)</li></ul><p>La longueur maximale d’un canton est en principe de 2800 m. Elle est généralement de 1500 m sur les lignes parcourues à
la vitesse maximale de 160 km/h.</p><p><img src=../../../images/document-pedagogique-signaux-regimes-exploitation-v1/image-080.png alt></p><h3 id=avantages-du-bal>Avantages du BAL</h3><p>Le BAL offre un niveau élevé de sécurité et permet un débit important.</p><h3 id=limites>Limites</h3><p>L’installation du BAL est très coûteuse, et son fonctionnement nécessite une garantie de contact électrique entre la
roue et le rail.</p><h3 id=implémentation>Implémentation</h3><p>Simuler correctement le système BAL nécessite de respecter les critères suivants :</p><ul><li>lorsque la tête du train pénètre dans un canton, le signal d&rsquo;entrée de celui-ci passe en indication d&rsquo;arrêt</li><li>lorsque la queue du train libère un canton, son signal d&rsquo;entrée passe en annonce</li><li>lorsque la queue du train libère un canton, le signal d&rsquo;entrée du canton précédent passe en voie libre</li><li>les signaux présentent une voie libre par défaut, sauf les signaux Nf qui sont par défaut en indication d&rsquo;arrêt</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-df767392033b23ea3ad6e798d252568e>7.2.2.1.2 - BAPR</h1><div class=lead>Block Automatique à Permitivité Restreinte</div><p>Le signal d’entrée du canton est un signal qui présente une indication liée à l’état d’occupation du canton suivant
(indication d’arrêt ou de voie libre). Sur certaines lignes l’occupation du canton n’est pas obtenue par le circuit de
voie mais par un système de comptage d’essieux entrants et sortants.</p><p>Les cantons sont beaucoup plus longs que le BAL (jusqu’à 15 km et plus) et par conséquent le débit est moins important.</p><p><img src=../../../images/document-pedagogique-signaux-regimes-exploitation-v1/image-081.png alt></p><p><img src=../../../images/document-pedagogique-signaux-regimes-exploitation-v1/image-082.png alt></p><h3 id=avantages-du-bapr>Avantages du BAPR</h3><p>Le BAPR offre un bon niveau de sécurité et il est moins coûteux que le BAL.</p><h3 id=limites>Limites</h3><p>Ce type de block n’est adapté qu’aux lignes conventionnelles à trafic moyen compte tenu de l’espacement imposé entre 2
trains successifs.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-e01159cc2509e9b8a7a7388d4bd95a49>7.2.2.2 - ERTMS</h1><div class=lead>European Rail Traffic Management System</div><h3 id=introduction>Introduction</h3><p>L&rsquo;ERTMS, pour <em>European Rail Traffic Management System</em>, est un système qui vise à harmoniser la signalisation
ferroviaire en Europe.</p><p>Il est composé de trois sous-systèmes :</p><ul><li>un système de signalisation : l&rsquo;<a href=etcs/>ETCS</a></li><li>un système de communication : <a href=gsm-r/>GSM-R</a> / <a href=gprs/>GPRS</a> / <a href=frmcs/>FRMCS</a></li><li>un système de gestion du traffic : l&rsquo;<a href=etml/>ETML</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-f5d93bfed9636387eb24298e7ecc5ee0>7.2.2.2.1 - ETCS</h1><div class=lead>European Train Control System</div><h3 id=généralités>Généralités</h3><p>ETCS est le système européen de contrôle commande des trains. La partie bord est interopérable. La partie sol peut être
différente selon les pays tout en répondant aux mêmes objectifs de fonctionnalité.</p><p>Il existe quatre niveaux différents dont deux sont en service : L’<a href=#etcs-niveau-1>ETCS 1</a> et L’<a href=#etcs-niveau-2>ETCS 2</a>. L’ETCS 0 est interdit en France.
L’ETCS 3 est encore à l’état de développement dans la plupart des pays de l’Union européenne.</p><p>Il s’agit d’un système de signalisation de cabine et de contrôle de vitesse faisant appel aux trois composantes
suivantes :</p><ul><li><strong>sol</strong> : pour la gestion des circulations comprenant notamment l’espacement, la protection des points à protéger et des
circulations</li><li><strong>bord</strong> : pour l’affichage des ordres et informations à destination du conducteur et le contrôle de la bonne exécution de
ceux-ci, dénommé EUROCAB</li><li><strong>liaison</strong> : pour les échanges de données entre le sol et le bord :<ul><li>liaison ponctuelle unidirectionnelle du sol vers le bord par EURO BALISES,</li><li>liaison radiotéléphonique continue et bidirectionnelle par <a href=../gsm-r/>GSM-R</a> DATA pour <a href=#etcs-niveau-2>ETCS2</a> dénommé EURORADIO.</li></ul></li></ul><p>Sur le <a href=../../../../glossary/#r>RFN</a>, sont mis en oeuvre les niveaux d&rsquo;exploitations suivants :</p><ul><li><p>L’<a href=#etcs-niveau-1>ETCS1</a> sur certaines lignes parcourables jusqu’à 220 km/h. Il correspond à un système de signalisation de cabine,
généralement superposé à la signalisation au sol existante, dont les informations entre le sol et le bord sont
transmises ponctuellement par eurobalise.</p></li><li><p>L’<a href=#etcs-niveau-2>ETCS2</a> sur certaines lignes à grande vitesse. Il correspond à un système de signalisation de cabine dont les
informations entre le sol et le bord sont transmises en temps utile ou cycliquement par liaison permanente <a href=../gsm-r/>GSM-R</a> DATA.</p><p>L’<a href=#etcs-niveau-2>ETCS2</a> est un système qui ne nécessite pas la matérialisation des cantons sur le terrain.</p></li></ul><p>Préalablement à tout déplacement, les données relatives au train doivent être saisies ou paramétrées à bord. Ainsi, le
système peut, à partir des données bord et sol, superviser le train, c&rsquo;est-à-dire contrôler sa vitesse et ses
déplacements et intervenir en cas de nécessité.</p><p>La détection d&rsquo;une circulation sur une partie de voie est réalisée au moyen de circuits de voie ou de compteurs
d’essieux.
En <a href=#etcs-niveau-2>ETCS2</a>, la combinaison des équipements sol et bord est telle qu’elle ne nécessite, normalement, pas de signalisation
complémentaire au sol.</p><h3 id=équipement-bord>Équipement bord</h3><p>Le bord est constitué d&rsquo;un DMI, d’un EVC, de capteurs odométriques (de vitesse), d’antennes pour la lecture des PI ETCS,
un modem <a href=../gsm-r/>GSM-R</a> (Euroradio) pour ETCS2, d’une unité juridique d’enregistrement des paramètres d’exploitation,
d’interfaces avec le train.</p><p><img src=../../../images/document-pedagogique-signaux-regimes-exploitation-v1/image-106.png alt></p><h3 id=le-dmi>Le DMI</h3><p>Le DMI est l’interface entre le conducteur et la machine. Il permet d’afficher les ordres et instructions en fonction
des données sol et/ou bord. Le conducteur renseigne également le système par saisie de données.</p><p>L’espacement des circulations et la protection des points dangereux se traduisent par l’affichage en temps utile d’une
vitesse but et d’une distance but. La vitesse but doit être respectée par le conducteur au point défini par la distance but.</p><p>En « marche normale », le DMI indique au conducteur la vitesse autorisée qui ne doit pas être dépassée. Dans ce cas, il
n’y a pas d’affichage de la distance but et de la vitesse but.</p><p>Un secteur pouvant présenter différentes couleurs est utilisé pour indiquer les ordres de vitesse ou d&rsquo;arrêt.</p><p>Enfin, d’autres indications sont affichées telles que la signalisation de traction électrique, le niveau d&rsquo;exploitation,
le mode technique. Les changements d’indication au DMI peuvent être accompagnés d’indications sonores. Une zone en
partie basse du DMI est également réservée pour l’affichage de messages textuels. Certaines informations complémentaires
peuvent également être affichées par l&rsquo;entreprise ferroviaire.</p><p><img src=../../../images/document-pedagogique-signaux-regimes-exploitation-v1/image-107.png alt></p><blockquote><p>Dans cet exemple, le conducteur autorisé à circuler à 140 km/h maximum, circule à 125 km/h, il va devoir observer une
phase de ralentissement afin de respecter la vitesse maxi de 100 km/h (vitesse But) à une distance de 2850 mètres (distance But).</p></blockquote><p>Le DMI utilise un code couleur, avec la signification suivante :</p><ul><li><strong>blanc/gris clair/gris foncé</strong> : aucune action immédiate n’est exigée du conducteur</li><li><strong>jaune</strong> : le conducteur doit intervenir si la vitesse réelle est proche de la vitesse autorisée (risque de passer à
la couleur orange en l’absence de réaction)</li><li><strong>orange</strong> : l’intervention est insuffisante (risque de passer à la couleur rouge en l’absence de réaction du conducteur)</li><li><strong>rouge</strong> : réaction trop tardive du conducteur, prise en charge par le système (peut revenir au jaune, au gris ou au
blanc après une action appropriée)</li></ul><h3 id=etcs-niveau-1>ETCS niveau 1</h3><h4 id=transmission-sol-bord>Transmission sol-bord</h4><p>Ce niveau utilise une transmission ponctuelle à l&rsquo;aide de balises placées au pied des signaux et en amont. Ces balises
(eurobalises) communiquent les données de signalisation au train.</p><h4 id=détection-des-trains>Détection des trains</h4><p>Le niveau 1 nécessite l&rsquo;utilisation d&rsquo;un système de détection des trains au sol (tel que des circuits de voie, compteurs
d&rsquo;essieux et autres). Toutes ces informations sont donc transmises ponctuellement au train. La cadence de l’information
donnée pouvant être augmentée en jouant sur le nombre de balises, ou en installant une boucle (euroloop), équivalent
d&rsquo;une balise, mais longeant la ligne sur une certaine distance.</p><h3 id=etcs-niveau-2>ETCS niveau 2</h3><h4 id=transmission-sol-bord-1>Transmission sol-bord</h4><p>Les données de signalisation sont transmises de manière permanente, via le réseau <a href=../gsm-r/>GSM-R</a>. Le train communique constamment
sa position (qu&rsquo;il détermine avec un odomètre) au centre de contrôle qui lui communique en retour les actions à
effectuer (vitesse, arrêt, etc.).</p><p>Des eurobalises sont toujours présentes sur la voie pour recaler éventuellement l&rsquo;odométrie embarquée.</p><h4 id=détection-des-trains-1>Détection des trains</h4><p>Un système de détection des trains au sol s’appuie sur l’existence des circuits de voie pour localiser un train aval sur
un canton. Cette information est transmise au radio block center (RBC) qui gère ensuite l’espacement entre deux circulations.
Le train suiveur reçoit une nouvelle autorisation de circulation par l’intermédiaire de la liaison radio <a href=../gsm-r/>GSM-R</a>.
Dès que le train aval libère un canton le poste central de commande reçoit l’information correspondante du sol qui est
transmise par liaison radio au train suiveur.</p><h4 id=avantage>Avantage</h4><p>Le niveau 2 rend disponible quasi immédiatement une information « libératoire » pour le train suiveur et contribue ainsi
à augmenter la fluidité. Cette immédiateté est la différence par rapport à la signalisation conventionnelle, où une
demi-minute est parfois nécessaire pour libérer un aiguillage alors que le train est déjà bien loin.</p><h3 id=les-modes-techniques>Les modes techniques</h3><p>Les modes techniques utilisés sur le RFN sont :</p><ul><li><p><strong>Mode FS</strong> : Conduite en supervision complète.</p><p>Toutes les données train et voie sont disponibles à bord.</p><p>Le <a href=#le-dmi>DMI</a> affiche :</p><ul><li>la vitesse réelle du train et la vitesse autorisée</li><li>lors de l&rsquo;approche d&rsquo;un <a href=../../../../glossary/#e>EOA</a>, d&rsquo;un repère d&rsquo;arrêt ETCS ou un heurtoir, la vitesse but et la distance but</li></ul><p>Le système « bord » supervise la vitesse, le déplacement du train, le respect de l’<a href=../../../../glossary/#e>EOA</a> matérialisé par un repère
d’arrêt ETCS, un signal d’arrêt ou un heurtoir en ETCS1.</p></li><li><p><strong>Mode <a href=../../../../glossary/#o>OS</a></strong> : Conduite en marche à vue.</p><p>Toutes les données train et voie sont disponibles à bord sauf l’assurance de la libération de toute ou partie de la
voie allouée au train.</p><p>Le DMI affiche les mêmes indications qu’en mode FS.</p><p>Le système « bord » assure également la supervision comme en mode FS.</p></li><li><p><strong>Mode <a href=../../../../glossary/#s>SR</a></strong> : Conduite sous la responsabilité des agents.</p><p>Ce mode technique est utilisé pour les situations dégradées et la procédure « Mise en service » lorsque le bord n’a
pas reçu d’allocation de voie. Le système « bord » ne supervise que la vitesse du mode SR et le franchissement des
repères d&rsquo;arrêt ETCS et des signaux d’arrêt.</p></li><li><p><strong>Mode <a href=../../../../glossary/#s>SH</a></strong> : Circulation en manœuvre.</p><p>Ce mode technique est sélectionné par le conducteur pour les mouvements de manœuvre. Le système « bord » ne supervise
que la vitesse du train.</p></li><li><p><strong>Mode <a href=../../../../glossary/#n>NL</a></strong> : Conduite d&rsquo;un engin moteur non en tête du mouvement</p><p>Ce mode technique est utilisé en cas de pousse ou de double traction.</p></li></ul><h3 id=protection-contre-le-rattrapage>Protection contre le rattrapage</h3><p>En mode FS, une vitesse autorisée affichée sans la présentation de l&rsquo;<a href=../../../../glossary/#e>EOA</a> signifie « marche normale ».</p><p>La <a href=../../../../glossary/#m>MA</a> constituée d’un ou plusieurs cantons est allouée canton par canton, par ajout successif d’un canton.
Si le canton en aval du dernier canton alloué est occupé le train doit être en mesure de s’arrêter avant l’entrée de ce
canton. Le conducteur est alors avisé par une indication sonore au DMI.</p><p>Dès lors, les indications de conduite (vitesse but égale à 0 et une distance but) permettant de respecter la courbe de
freinage sont affichées.</p><p>Le conducteur doit ralentir de façon à être en mesure de s’arrêter avant l’<a href=../../../../glossary/#e>EOA</a>, tout en respectant la vitesse autorisée.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-9db26aeed5b5d59762545310929d3cc5>7.2.2.2.2 - GSM-R</h1><div class=lead>Global System for Mobiles - Railways</div></div><div class=td-content style=page-break-before:always><h1 id=pg-b0d4d9c0f9100dc8d7e3b2e403c35029>7.2.2.2.3 - GPRS</h1><div class=lead>General Packet Radio Service</div></div><div class=td-content style=page-break-before:always><h1 id=pg-1dd2a3c11580b925c8defb5b3b76c9cd>7.2.2.2.4 - FRMCS</h1><div class=lead>Futur Système de Communications Mobiles Ferroviaires</div></div><div class=td-content style=page-break-before:always><h1 id=pg-903f9b0c14aa9a4d3b185646aeb45e8a>7.2.2.2.5 - ETML</h1><div class=lead>European Train Management Layer</div></div><div class=td-content style=page-break-before:always><h1 id=pg-c912e2282d1c8807013bac4ce08861ce>8 - JSON Schemas</h1><script src=https://cdn.rawgit.com/caldwell/renderjson/master/renderjson.js></script><div id=container><h1>Infrastructure</h1></div><script>var infra={};tmp=$.ajax({url:"/osrd-website/schemas/infra_schema.json",async:!1,dataType:"json",success:function(e){infra=e}}),document.getElementById("container").appendChild(renderjson(infra))</script><div id=container2><h1>Rolling Stock</h1></div><script>var rolling_stock={};tmp=$.ajax({url:"/osrd-website/schemas/rolling_stock_schema.json",async:!1,dataType:"json",success:function(e){rolling_stock=e}}),document.getElementById("container2").appendChild(renderjson(rolling_stock))</script><style>#container,#container2{text-shadow:none;background:;padding:1em}.renderjson a{text-decoration:none}.renderjson .disclosure{color:#aa026d;font-size:150%}.renderjson .syntax{color:grey}.renderjson .string{color:#000}.renderjson .number{color:cyan}.renderjson .boolean{color:plum}.renderjson .key{color:#aa026d}.renderjson .keyword{color:#fafad2}.renderjson .object.syntax{color:#20b2aa}.renderjson .array.syntax{color:#ffa07a}</style></div><div class=td-content style=page-break-before:always><h1 id=pg-f347e8a68ab88feb2dbd40d7268e3b66>9 - Documentation du code source</h1><div class=lead>Documentation Javadoc du projet Core dans OSRD</div><p>Documentation Javadoc du projet Core dans OSRD</p></div><div class=td-content><h1 id=pg-e5ecf02cfae3164a13a9096038e2ac6b>9.1 - Core</h1><div class=lead>Javadoc du service Core</div><script type=text/javascript>function resizeIframe(e){e.height=e.contentWindow.document.body.scrollHeight+"px"}</script><iframe id=iframe-id src=/osrd-website/javadoc/index.html width=100% name=iframe-name style=min-height:98vh;border:none onload=resizeIframe(this) referrerpolicy=no-referrer><p>Your browser can not display embedded frames. You can access the embedded page via the following link: <a href=/osrd-website/javadoc/index.html>/osrd-website/javadoc/index.html</a></p></iframe></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=LinkedIn aria-label=LinkedIn><a class=text-white target=_blank rel=noopener href=https://www.linkedin.com/company/dgex-solutions/ aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/dgexsolutions aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/DGEXSolutions/osrd aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://example.org/slack aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 DGEX Solutions Tous droits réservés</small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/mermaid@8.13.4/dist/mermaid.min.js integrity="sha512-JERecFUBbsm75UpkVheAuDOE8NdHjQBrPACfEQYPwvPG+fjgCpHAz1Jw2ci9EXmd3DdfiWth3O3CQvcfEg8gsA==" crossorigin=anonymous></script><style>.markmap>svg{width:100%;height:300px}</style><script>window.markmap={autoLoader:{manual:!0}}</script><script src=https://cdn.jsdelivr.net/npm/markmap-autoloader></script>
<script src=/js/tabpane-persist.js></script>
<script src=/osrd-website/js/main.min.388e1698db452a79196d63fdb03f54c101b02ecbf065f125f580520ae8be8551.js integrity="sha256-OI4WmNtFKnkZbWP9sD9UwQGwLsvwZfEl9YBSCui+hVE=" crossorigin=anonymous></script></body></html>